{"version":3,"sources":["webpack:///webpack/bootstrap f9a317a48d0a3e1a1228","webpack:///./lib/action2gcode/generators/abstract-generator.js","webpack:///./lib/lw.raster2gcode/raster-to-gcode.js","webpack:///./lib/action2gcode/gcode-generator.js","webpack:///./lib/action2gcode/generators/default-generator.js","webpack:///./lib/action2gcode/generators/marlin-generator.js","webpack:///./lib/lw.raster2gcode/canvas-filters.js","webpack:///./lib/lw.raster2gcode/canvas-grid.js","webpack:///./lib/workers/cam-raster.js","webpack:///../~/floyd-steinberg/floyd-steinberg.js"],"names":["AbstractGenerator","constructor","settings","RasterToGcode","CanvasGrid","Object","assign","ppi","x","y","toolDiameter","rapidRate","feedRate","rateUnit","beamRange","min","max","beamPower","milling","zSafe","zSurface","zDepth","passDepth","offsets","X","Y","trimLine","joinPixel","burnWhite","verboseG","diagonal","overscan","precision","S","gcodeGenerator","nonBlocking","filters","smoothing","brightness","contrast","gamma","grayscale","shadesOfGray","invertColor","onProgress","onProgressContext","onDone","onDoneContext","onAbort","onAbortContext","Error","passes","Math","abs","floor","ppm","parseFloat","toFixed","scaleRatio","running","gcode","gcodes","currentLine","lastCommands","outputSize","width","height","beamOffset","realBeamRange","_registerUserCallbacks","callbacks","on","_processImage","size","abort","run","generator","G1","moveTool","G0","moveRapid","undefined","_addHeader","_scanDiagonally","_scanHorizontally","push","options","i","length","splice","join","_mapPixelPower","value","range","_command","name","commands","Array","prototype","slice","call","arguments","command","line","params","il","apply","toLowerCase","result","split","_getPixelPower","defaultValue","pixel","getPixel","gray","error","_getPoint","index","point","G","s","first","lastWhite","last","lastColored","firstColored","_trimCurrentLine","p","shift","pop","_reduceCurrentLine","points","power","_overscanCurrentLine","reversed","pixels","firstPoint","lastPoint","rightPoint","leftPoint","unshift","_processCurrentLine","_processMillingLine","_processLaserLine","reverse","addCommand","plung","Z","zMax","pass","passNum","w","h","computeCurrentLine","percent","lastPercent","processCurrentLine","round","_onProgress","processNextLine","_onAbort","setTimeout","forEach","_onDone","totalLines","lineNum","event","callback","context","method","toUpperCase","getHeightMap","heightMap","getGenerator","MarlinGenerator","DefaultGenerator","optimized","move","toolOn","hasOwnProperty","toolOff","a","f","trim","prefix","gcodeToolOn","indexOf","gcodeLaserIntensity","grayscaleAlgorithms","color","data","exp","log","algorithm","shades","r","g","b","parseInt","canvasFilters","canvas","dithering","getContext","imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","imageData","getImageData","contrastFactor","brightnessOffset","gammaCorrection","shadesOfGrayFactor","putImageData","cellSize","cols","rows","file","image","url","load","input","File","loadFromFile","Image","loadFromImage","URL","loadFromURL","Promise","reject","_loadImage","src","resolve","onload","then","catch","onerror","createObjectURL","ceil","sx","sy","sw","sh","document","createElement","fillStyle","fillRect","drawImage","isNaN","col","row","pixelData","grid","coords","self","onmessage","cmd","start","rasterToGcode","properties","postMessage"],"mappings":";AAAA;AACA;AACA,mEAA2D;AAC3D;AACA;AACA,WAAG;;AAEH,oDAA4C;AAC5C;AACA;;AAEA,kDAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA,6CAAqC;AACrC;AACA;;;;AAIA;AACA,sDAA8C;AAC9C;AACA,oCAA4B;AAC5B,qCAA6B;AAC7B,yCAAiC;;AAEjC,+CAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAAsC;AACtC;AACA;AACA,qCAA6B;AAC7B,qCAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yBAAiB,8BAA8B;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA,4DAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA,aAAK;AACL,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAgB,uCAAuC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAe,uCAAuC;AACtD;AACA;AACA;AACA;AACA;AACA,uBAAe,sBAAsB;AACrC;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAa,wCAAwC;AACrD;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,8CAAsC,uBAAuB;;AAE7D;AACA;;;;;;;;;;;;;;AC9rBA;IACMA,iB,GAAN,MAAMA,iBAAN,CAAwB;AACtB;AACAC,cAAYC,QAAZ,EAAsB;AACpB,SAAKA,QAAL,GAAgBA,QAAhB;AACD;;AAJqB,C;;AAQxB;;QACSF,iB,GAAAA,iB;iBACMA,iB;;;;;;;;;gCAVTA,iB;;;;;;;;;;;;;;;;;;;ACFN;;;;AACA;;;;AAEA;IACMG,a,GAAN,MAAMA,aAAN,SAA4BC,oBAA5B,CAAuC;AACnC;AACAH,gBAAYC,QAAZ,EAAsB;AAClB;AACAA,mBAAWG,OAAOC,MAAP,CAAc;AACrBC,iBAAK,EAAEC,GAAG,GAAL,EAAUC,GAAG,GAAb,EADgB,EACI;;AAEzBC,0BAAc,GAHO,EAGG;AACxBC,uBAAc,IAJO,EAIG;AACxBC,sBAAc,GALO,EAKG;AACxBC,sBAAc,QANO,EAMG;;AAExBC,uBAAW,EAAEC,KAAK,CAAP,EAAUC,KAAK,CAAf,EARU,EAQY;AACjCC,uBAAW,EAAEF,KAAK,CAAP,EAAUC,KAAK,GAAf,EATU,EASY;;AAEjCE,qBAAW,KAXU,EAWH;AAClBC,mBAAW,CAZU,EAYH;AAClBC,sBAAW,CAbU,EAaH;AAClBC,oBAAW,CAAC,EAdS,EAcH;AAClBC,uBAAW,CAfU,EAeH;;AAElBC,qBAAW,EAAEC,GAAG,CAAL,EAAQC,GAAG,CAAX,EAjBU,EAiBM;AAC3BC,sBAAW,IAlBU,EAkBM;AAC3BC,uBAAW,IAnBU,EAmBM;AAC3BC,uBAAW,IApBU,EAoBM;AAC3BC,sBAAW,KArBU,EAqBM;AAC3BC,sBAAW,KAtBU,EAsBM;AAC3BC,sBAAW,CAvBU,EAuBM;;AAE3BC,uBAAW,EAAER,GAAG,CAAL,EAAQC,GAAG,CAAX,EAAcQ,GAAG,CAAjB,EAzBU,EAyBY;;AAEjCC,4BAAgB,SA3BK;;AA6BrBC,yBAAa,IA7BQ,EA6BF;;AAEnBC,qBAAS;AACLC,2BAAc,CADT,EACiB;AACtBC,4BAAc,CAFT,EAEiB;AACtBC,0BAAc,CAHT,EAGiB;AACtBC,uBAAc,CAJT,EAIiB;AACtBC,2BAAc,MALT,EAKiB;AACtBC,8BAAc,GANT,EAMiB;AACtBC,6BAAc,KAPT,CAOiB;AAPjB,aA/BY;;AAyCrBC,wBAAmB,IAzCE,EAyCI;AACzBC,+BAAmB,IA1CE,EA0CI;;AAEzBC,oBAAe,IA5CM,EA4CA;AACrBC,2BAAe,IA7CM,EA6CA;;AAErBC,qBAAgB,IA/CK,EA+CC;AACtBC,4BAAgB,IAhDK,CAgDC;AAhDD,SAAd,EAiDR/C,YAAY,EAjDJ,CAAX;;AAmDA;AACA,cAAMA,QAAN;;AAEA;AACA,YAAI,KAAKgB,OAAT,EAAkB;AACd,gBAAI,KAAKC,KAAL,GAAa,KAAKC,QAAtB,EAAgC;AAC5B,sBAAM,IAAI8B,KAAJ,CAAU,uCAAV,CAAN;AACH;;AAED,iBAAKC,MAAL,GAAcC,KAAKC,GAAL,CAASD,KAAKE,KAAL,CAAW,KAAKjC,MAAL,GAAc,KAAKC,SAA9B,CAAT,CAAd;AACH;;AAED;AACA,YAAI,KAAKZ,YAAL,IAAqB,CAAzB,EAA4B;AACxB,kBAAM,IAAIwC,KAAJ,CAAU,iCAAV,CAAN;AACH;;AAED;AACA,YAAI,CAAE,KAAK3C,GAAL,CAASC,CAAf,EAAkB;AACd,iBAAKD,GAAL,GAAW,EAAEC,GAAG,KAAKD,GAAV,EAAeE,GAAG,KAAKF,GAAvB,EAAX;AACH;;AAED;AACA,aAAKgD,GAAL,GAAW;AACP/C,eAAGgD,WAAW,CAAC,QAAQ,KAAKjD,GAAL,CAASC,CAAT,GAAa,GAArB,CAAD,EAA4BiD,OAA5B,CAAoC,EAApC,CAAX,CADI;AAEPhD,eAAG+C,WAAW,CAAC,QAAQ,KAAKjD,GAAL,CAASE,CAAT,GAAa,GAArB,CAAD,EAA4BgD,OAA5B,CAAoC,EAApC,CAAX;;AAGP;AALW,SAAX,CAMA,KAAKC,UAAL,GAAkB;AACdlD,eAAG,KAAK+C,GAAL,CAAS/C,CAAT,GAAa,KAAKE,YADP;AAEdD,eAAG,KAAK8C,GAAL,CAAS9C,CAAT,GAAa,KAAKC;;AAGzB;AALkB,SAAlB,CAMA,KAAKiD,OAAL,GAAoB,KAApB;AACA,aAAKC,KAAL,GAAoB,IAApB;AACA,aAAKC,MAAL,GAAoB,IAApB;AACA,aAAKC,WAAL,GAAoB,IAApB;AACA,aAAKC,YAAL,GAAoB,IAApB;;AAEA;AACA,aAAKC,UAAL,GAAkB,EAAEC,OAAQ,CAAV,EAAaC,QAAQ;;AAEvC;AAFkB,SAAlB,CAGA,KAAKC,UAAL,GAAkB,KAAKzD,YAAL,GAAoB,IAApB,GAA2B,IAA7C;;AAEA;AACA,aAAK0D,aAAL,GAAqB;AACjBrD,iBAAK,KAAKD,SAAL,CAAeE,GAAf,GAAqB,GAArB,GAA2B,KAAKC,SAAL,CAAeF,GAD9B;AAEjBC,iBAAK,KAAKF,SAAL,CAAeE,GAAf,GAAqB,GAArB,GAA2B,KAAKC,SAAL,CAAeD;;AAGnD;AALqB,SAArB,CAMA,IAAI,KAAKH,QAAL,KAAkB,QAAtB,EAAgC;AAC5B,iBAAKD,QAAL,IAAkB,EAAlB;;AAEA,gBAAI,KAAKD,SAAT,EAAoB;AAChB,qBAAKA,SAAL,IAAkB,EAAlB;AACH;AACJ;;AAED;AACA,aAAK0D,sBAAL,CAA4B,IAA5B;AACH;;AAED;AACAA,2BAAuBC,SAAvB,EAAkC;AAC9B;AACAA,kBAAU1B,UAAV,IAAwB,KAAK2B,EAAL,CAAQ,UAAR,EAAoBD,UAAU1B,UAA9B,EAA0C0B,UAAUzB,iBAApD,CAAxB;AACAyB,kBAAUtB,OAAV,IAAqB,KAAKuB,EAAL,CAAQ,OAAR,EAAiBD,UAAUtB,OAA3B,EAAoCsB,UAAUrB,cAA9C,CAArB;AACAqB,kBAAUxB,MAAV,IAAoB,KAAKyB,EAAL,CAAQ,MAAR,EAAgBD,UAAUxB,MAA1B,EAAkCwB,UAAUvB,aAA5C,CAApB;AACH;;AAED;AACAyB,oBAAgB;AACZ;AACA,cAAMA,aAAN;;AAEA;AACA,aAAKR,UAAL,GAAkB;AACdC,mBAAQ,KAAKQ,IAAL,CAAUR,KAAV,IAAoB,KAAKvD,YAAL,GAAoB,IAAxC,IAAgD,IAD1C;AAEdwD,oBAAQ,KAAKO,IAAL,CAAUP,MAAV,IAAoB,KAAKxD,YAAL,GAAoB,IAAxC,IAAgD;AAF1C,SAAlB;AAIH;;AAED;AACAgE,YAAQ;AACJ,aAAKf,OAAL,GAAe,KAAf;AACH;;AAED;AACAgB,QAAIzE,QAAJ,EAAc;AACV,YAAI,KAAKyD,OAAT,EAAkB;AACd;AACH;;AAED;AACA,aAAKA,OAAL,GAAoB,IAApB;AACA,aAAKC,KAAL,GAAoB,EAApB;AACA,aAAKC,MAAL,GAAoB,EAApB;AACA,aAAKE,YAAL,GAAoB,EAApB;AACA,aAAKD,WAAL,GAAoB,IAApB;;AAEA;AACA5D,mBAAWA,YAAY,EAAvB;;AAEA,aAAK0E,SAAL,GAAiB,kCAAa,KAAK1C,cAAlB,EAAkC,IAAlC,CAAjB;;AAEA;AACA,aAAK2C,EAAL,GAAU,KAAKD,SAAL,CAAeE,QAAzB;AACA,aAAKC,EAAL,GAAU,KAAKnD,SAAL,GAAiB,KAAKgD,SAAL,CAAeE,QAAhC,GAA2C,KAAKF,SAAL,CAAeI,SAApE;;AAEA;AACA,aAAKX,sBAAL,CAA4BnE,QAA5B;;AAEA;AACA,YAAIiC,cAAc,KAAKA,WAAvB;;AAEA,YAAIjC,SAASiC,WAAT,KAAyB8C,SAA7B,EAAwC;AACpC9C,0BAAcjC,SAASiC,WAAvB;AACH;;AAED;AACA,aAAK+C,UAAL;;AAEA;AACA,YAAI,KAAKpD,QAAT,EAAmB;AACf,iBAAKqD,eAAL,CAAqBhD,WAArB;AACH,SAFD,MAGK;AACD,iBAAKiD,iBAAL,CAAuBjD,WAAvB;AACH;;AAED,YAAI,CAAEA,WAAN,EAAmB;AACf,mBAAO,KAAKyB,KAAZ;AACH;AACJ;;AAEDsB,iBAAa;AACT;AACA,aAAKtB,KAAL,CAAWyB,IAAX,CACI,iDADJ,EAEI,oBAAoB,KAAKrB,UAAL,CAAgBC,KAApC,GAA4C,KAA5C,GAAoD,KAAKD,UAAL,CAAgBE,MAApE,GAA6E,KAFjF,EAGI,uBAAuB,KAAK3D,GAAL,CAASC,CAAhC,GAAoC,QAApC,GAA+C,KAAKD,GAAL,CAASE,CAH5D,EAII,uBAAuB,KAAK8C,GAAL,CAAS/C,CAAhC,GAAoC,QAApC,GAA+C,KAAK+C,GAAL,CAAS9C,CAJ5D,EAKI,oBAAoB,KAAKC,YAAzB,GAAwC,KAL5C,EAMI,oBAAoB,KAAKE,QAAzB,GAAoC,GAApC,GAA0C,KAAKC,QANnD;;AASA,YAAI,KAAKF,SAAT,EAAoB;AACjB,iBAAKiD,KAAL,CAAWyB,IAAX,CAAgB,qBAAqB,KAAK1E,SAA1B,GAAsC,GAAtC,GAA4C,KAAKE,QAAjE;AACF;;AAED,YAAI,KAAKK,OAAT,EAAkB;AACd,iBAAK0C,KAAL,CAAWyB,IAAX,CACI,oBAAoB,KAAKlE,KAD7B,EAEI,oBAAoB,KAAKC,QAF7B,EAGI,oBAAoB,KAAKC,MAH7B;AAKH,SAND,MAOK;AACD,iBAAKuC,KAAL,CAAWyB,IAAX,CACI,oBAAoB,KAAKvE,SAAL,CAAeC,GAAnC,GAAyC,MAAzC,GAAkD,KAAKD,SAAL,CAAeE,GADrE,EAEI,oBAAoB,KAAKC,SAAL,CAAeF,GAAnC,GAAyC,MAAzC,GAAkD,KAAKE,SAAL,CAAeD,GAAjE,GAAuE,IAF3E;AAIH;;AAED;AACA,YAAIsE,UAAU,CAAC,WAAD,EAAc,UAAd,EAA0B,WAA1B,EAAuC,WAAvC,EAAoD,UAApD,EAAgE,UAAhE,CAAd;;AAEA,aAAK,IAAIC,IAAID,QAAQE,MAAR,GAAiB,CAA9B,EAAiCD,KAAK,CAAtC,EAAyCA,GAAzC,EAA8C;AAC1C,gBAAI,CAAE,KAAKD,QAAQC,CAAR,CAAL,CAAN,EAAwB;AACpBD,wBAAQG,MAAR,CAAeF,CAAf,EAAkB,CAAlB;AACH;AACJ;;AAED,YAAID,QAAQE,MAAZ,EAAoB;AAChB,iBAAK5B,KAAL,CAAWyB,IAAX,CAAgB,oBAAoBC,QAAQI,IAAR,CAAa,IAAb,CAApC;AACH;;AAED;AACA,aAAK9B,KAAL,CAAWyB,IAAX,CAAgB,EAAhB;;AAEA,YAAI,KAAK1E,SAAT,EAAoB;AACjB,iBAAKiD,KAAL,CAAWyB,IAAX,CAAgB,SAAS,KAAK1E,SAA9B;AACF;;AAED,aAAKiD,KAAL,CAAWyB,IAAX,CAAgB,SAAS,KAAKzE,QAA9B;AACA,aAAKgD,KAAL,CAAWyB,IAAX,CAAgB,EAAhB;AACH;;AAED;AACAM,mBAAeC,KAAf,EAAsB;AAClB,YAAIC,QAAQ,KAAK3E,OAAL,GAAe,EAAEH,KAAK,CAAP,EAAUC,KAAK,KAAKK,MAApB,EAAf,GAA8C,KAAK+C,aAA/D;AACA,eAAOwB,SAASC,MAAM7E,GAAN,GAAY6E,MAAM9E,GAA3B,IAAkC,GAAlC,GAAwC8E,MAAM9E,GAArD;AACH;;AAED;AACA+E,aAASC,IAAT,EAAeH,KAAf,EAAsB;AAClB;AACA;AACA,YAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B;AACA,gBAAII,WAAWC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAf;AACA,gBAAIC,OAAJ;AAAA,gBAAaC,OAAO,EAApB;AAAA,gBAAwBC,SAAS,EAAjC;;AAEA;AACA,iBAAK,IAAIjB,IAAI,CAAR,EAAWkB,KAAKT,SAASR,MAA9B,EAAsCD,IAAIkB,EAA1C,EAA8ClB,GAA9C,EAAmD;AAC/Ce,0BAAU,KAAKR,QAAL,CAAcY,KAAd,CAAoB,IAApB,EAA0BV,SAAST,CAAT,CAA1B,CAAV;AACAe,2BAAWC,KAAKlB,IAAL,CAAUiB,OAAV,CAAX;AACAA,4BAAYE,OAAOF,QAAQ,CAAR,EAAWK,WAAX,EAAP,IAAmCL,QAAQ,CAAR,CAA/C;AACH;;AAED;AACA,gBAAIM,SAASL,KAAKf,MAAL,GAAcO,KAAKK,IAAL,CAAU,KAAKxB,SAAf,EAA0B4B,MAA1B,EAAkCT,QAAQ,KAAKhC,YAAL,CAAkB,UAAlB,CAA1C,EAAyE8C,KAAzE,CAA+E,MAA/E,CAAd,GAAuG,IAApH;AACA,iBAAK9C,YAAL,CAAkB,UAAlB,IAAgCgC,IAAhC;AACA,mBAAOa,MAAP;AACH;;AAED;AACA;AACAhB,gBAAQA,MAAMnC,OAAN,CAAc,KAAKzB,SAAL,CAAe+D,IAAf,KAAwB,CAAtC,CAAR;;AAEA;AACA,YAAI,KAAKlE,QAAL,IAAiB+D,UAAU,KAAK7B,YAAL,CAAkBgC,IAAlB,CAA/B,EAAwD;AACpD,iBAAKhC,YAAL,CAAkBgC,IAAlB,IAA0BH,KAA1B;AACA,mBAAO,CAACG,IAAD,EAAOH,KAAP,CAAP;AACH;;AAED;AACA,eAAO,IAAP;AACH;;AAED;AACAkB,mBAAetG,CAAf,EAAkBC,CAAlB,EAAqBsG,YAArB,EAAmC;AAC/B,YAAI;AACA;AACAtG,gBAAI,KAAKgE,IAAL,CAAUP,MAAV,GAAmBzD,CAAnB,GAAuB,CAA3B;;AAEA;AACA,gBAAIuG,QAAQ,KAAKC,QAAL,CAAczG,CAAd,EAAiBC,CAAjB,CAAZ;;AAEA;AACA,mBAAO,MAAMuG,MAAME,IAAnB;AACH,SATD,CAUA,OAAOC,KAAP,EAAc;AACV,gBAAId,UAAUb,MAAV,KAAqB,CAAzB,EAA4B;AACxB,uBAAOuB,YAAP;AACH;AACD,kBAAMI,KAAN;AACH;AACJ;;AAED;AACAC,cAAUC,KAAV,EAAiB;AACb;AACA,YAAIC,QAAQ,KAAKxD,WAAL,CAAiBuD,KAAjB,CAAZ;;AAEA;AACA,YAAI,CAAEC,KAAN,EAAa;AACT,mBAAO,IAAP;AACH;;AAED;AACAA,cAAMC,CAAN,GAAUD,MAAME,CAAN,GAAU,KAAK3C,EAAf,GAAoB,KAAKE,EAAnC;AACAuC,cAAM9F,CAAN,GAAW8F,MAAM9G,CAAN,GAAU,KAAKE,YAAhB,GAAgC,KAAKa,OAAL,CAAaC,CAAvD;AACA8F,cAAM7F,CAAN,GAAW6F,MAAM7G,CAAN,GAAU,KAAKC,YAAhB,GAAgC,KAAKa,OAAL,CAAaE,CAAvD;AACA6F,cAAMrF,CAAN,GAAU,KAAK0D,cAAL,CAAoB2B,MAAME,CAA1B,CAAV;;AAEA;AACA,YAAI,KAAK1F,QAAT,EAAmB;AACf;AACAwF,kBAAM7F,CAAN,IAAW,KAAKf,YAAhB;;AAEA;AACA,gBAAI4G,MAAMG,KAAN,IAAeH,MAAMI,SAAzB,EAAoC;AAChCJ,sBAAM9F,CAAN,IAAW,KAAK2C,UAAhB;AACAmD,sBAAM7F,CAAN,IAAW,KAAK0C,UAAhB;AACH,aAHD,MAIK,IAAI,CAACmD,MAAMK,IAAN,IAAcL,MAAMM,WAArB,KAAqC,CAACN,MAAMO,YAAhD,EAA8D;AAC/DP,sBAAM9F,CAAN,IAAW,KAAK2C,UAAhB;AACAmD,sBAAM7F,CAAN,IAAW,KAAK0C,UAAhB;AACH;AACJ,SAbD,MAcK;AACD;AACAmD,kBAAM7F,CAAN,IAAW,KAAK0C,UAAhB;;AAEA;AACA,gBAAImD,MAAMG,KAAN,IAAeH,MAAMI,SAAzB,EAAoC;AAChCJ,sBAAM9F,CAAN,IAAW,KAAK2C,UAAhB;AACH,aAFD,MAGK,IAAI,CAACmD,MAAMK,IAAN,IAAcL,MAAMM,WAArB,KAAqC,CAACN,MAAMO,YAAhD,EAA8D;AAC/DP,sBAAM9F,CAAN,IAAW,KAAK2C,UAAhB;AACH;AACJ;;AAED;AACA,eAAOmD,KAAP;AACH;;AAED;AACAQ,uBAAmB;AACf;AACA,YAAIR,QAAQ,KAAKxD,WAAL,CAAiB,CAAjB,CAAZ;;AAEA,eAAOwD,SAAS,CAAEA,MAAMS,CAAxB,EAA2B;AACvB,iBAAKjE,WAAL,CAAiBkE,KAAjB;AACAV,oBAAQ,KAAKxD,WAAL,CAAiB,CAAjB,CAAR;AACH;;AAED;AACAwD,gBAAQ,KAAKxD,WAAL,CAAiB,KAAKA,WAAL,CAAiB0B,MAAjB,GAA0B,CAA3C,CAAR;;AAEA,eAAO8B,SAAS,CAAEA,MAAMS,CAAxB,EAA2B;AACvB,iBAAKjE,WAAL,CAAiBmE,GAAjB;AACAX,oBAAQ,KAAKxD,WAAL,CAAiB,KAAKA,WAAL,CAAiB0B,MAAjB,GAA0B,CAA3C,CAAR;AACH;;AAED;AACA,eAAO,KAAK1B,WAAL,CAAiB0B,MAAxB;AACH;;AAED;AACA0C,yBAAqB;AACjB;AACA,YAAI,KAAKpE,WAAL,CAAiB0B,MAAjB,GAA0B,CAA9B,EAAiC;AAC7B,mBAAO,KAAK1B,WAAL,CAAiB0B,MAAxB;AACH;;AAED;AACA,YAAI2C,SAAS,KAAKrE,WAAL,CAAiB2B,MAAjB,CAAwB,CAAxB,CAAb;;AAEA;AACA,YAAI2C,QAAQ,KAAKtE,WAAL,CAAiB,CAAjB,EAAoBiE,CAAhC;;AAEA;AACA,aAAK,IAAIT,KAAJ,EAAW/B,IAAI,CAAf,EAAkBkB,KAAK0B,OAAO3C,MAAP,GAAgB,CAA5C,EAA+CD,IAAIkB,EAAnD,EAAuDlB,GAAvD,EAA4D;AACxD;AACA+B,oBAAQa,OAAO5C,CAAP,CAAR;;AAEA;AACA,gBAAI6C,UAAUd,MAAMS,CAApB,EAAuB;AACnB,qBAAKjE,WAAL,CAAiBuB,IAAjB,CAAsBiC,KAAtB;AACH;;AAED;AACAc,oBAAQd,MAAMS,CAAd;AACH;;AAED;AACA,aAAKjE,WAAL,CAAiBuB,IAAjB,CAAsB8C,OAAO5C,CAAP,CAAtB;AACH;;AAED;AACA8C,yBAAqBC,QAArB,EAA+B;AAC3B;AACA,YAAIC,SAAS,KAAKxG,QAAL,GAAgB,KAAKwB,GAAL,CAAS/C,CAAtC;;AAEA;AACA,YAAIgI,aAAa,KAAK1E,WAAL,CAAiB,CAAjB,CAAjB;AACA,YAAI2E,YAAa,KAAK3E,WAAL,CAAiB,KAAKA,WAAL,CAAiB0B,MAAjB,GAA0B,CAA3C,CAAjB;;AAEA;AACAgD,mBAAWhB,CAAX,KAAiBgB,WAAWd,SAAX,GAAwB,IAAzC;AACAe,kBAAUjB,CAAV,KAAiBiB,UAAUb,WAAV,GAAwB,IAAzC;;AAEA;AACAU,mBAAYG,UAAUjB,CAAV,GAAc,CAA1B,GAAgCgB,WAAWhB,CAAX,GAAe,CAA/C;;AAEA;AACA,YAAIkB,aAAa,EAAElI,GAAGiI,UAAUjI,CAAV,GAAc+H,MAAnB,EAA4B9H,GAAGgI,UAAUhI,CAAzC,EAA6C+G,GAAG,CAAhD,EAAmDO,GAAG,CAAtD,EAAjB;AACA,YAAIY,YAAa,EAAEnI,GAAGgI,WAAWhI,CAAX,GAAe+H,MAApB,EAA4B9H,GAAG+H,WAAW/H,CAA1C,EAA6C+G,GAAG,CAAhD,EAAmDO,GAAG,CAAtD,EAAjB;;AAEA,YAAI,KAAKjG,QAAT,EAAmB;AACf6G,sBAAUlI,CAAV,IAAgB8H,MAAhB;AACAG,uBAAWjI,CAAX,IAAgB8H,MAAhB;AACH;;AAED;AACA,aAAKzE,WAAL,CAAiB8E,OAAjB,CAAyBD,SAAzB;AACA,aAAK7E,WAAL,CAAiBuB,IAAjB,CAAsBqD,UAAtB;AACH;;AAED;AACAG,wBAAoBP,QAApB,EAA8B;AAC1B,YAAI,KAAKpH,OAAT,EAAkB;AACd,mBAAO,KAAK4H,mBAAL,CAAyBR,QAAzB,CAAP;AACH;;AAED,eAAO,KAAKS,iBAAL,CAAuBT,QAAvB,CAAP;AACH;;AAED;AACAQ,wBAAoBR,QAApB,EAA8B;AAAA;;AAC1B;AACA,YAAI,CAAE,KAAKR,gBAAL,EAAN,EAA+B;AAC3B,mBAAO,IAAP;AACH;;AAED;AACA,YAAI,KAAKnG,SAAT,EAAoB;AAChB,iBAAKuG,kBAAL;AACH;;AAED;AACA,aAAKpE,WAAL,CAAiB,CAAjB,EAAoB2D,KAApB,GAA4B,IAA5B;AACA,aAAK3D,WAAL,CAAiB,KAAKA,WAAL,CAAiB0B,MAAjB,GAA0B,CAA3C,EAA8CmC,IAA9C,GAAqD,IAArD;;AAEA;AACA,YAAIW,QAAJ,EAAc;AACV,iBAAKxE,WAAL,GAAmB,KAAKA,WAAL,CAAiBkF,OAAjB,EAAnB;AACH;;AAED;AACA,YAAI1B,KAAJ;AAAA,YAAWD,QAAQ,CAAnB;;AAEA;AACA,YAAIf,OAAJ;AAAA,YAAa1C,QAAQ,EAArB;;AAEA,YAAIqF,aAAa,YAAa;AAC1B3C,sBAAU,MAAKR,QAAL,CAAc,YAAd,CAAV;AACAQ,uBAAWL,MAAMC,SAAN,CAAgBb,IAAhB,CAAqBqB,KAArB,CAA2B9C,KAA3B,EAAkC0C,OAAlC,CAAX;AACH,SAHD;;AAKA;AACAgB,gBAAQ,KAAKF,SAAL,CAAeC,KAAf,CAAR;;AAEA,YAAI6B,QAAQ,KAAZ;AACA,YAAIC,CAAJ,EAAOC,IAAP;;AAEA,YAAIC,OAAQC,OAAD,IAAa;AACpB;AACAL,uBAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAM,KAAK7D,KAAX,CAArC;AACA8H,uBAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAMsC,MAAM9F,CAAZ,CAArC,EAAqD,CAAC,GAAD,EAAM8F,MAAM7F,CAAZ,CAArD;AACAwH,uBAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAM,KAAK5D,QAAX,CAArC;;AAEA;AACA,mBAAOkG,KAAP,EAAc;AACV,oBAAIA,MAAMrF,CAAV,EAAa;AACT,wBAAIiH,KAAJ,EAAW;AACPD,mCAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAM,KAAK5D,QAAX,CAArC;AACA8H,gCAAQ,KAAR;AACH;;AAEDC,wBAAO7B,MAAMrF,CAAb;AACAmH,2BAAO,KAAK9H,SAAL,GAAiBgI,OAAxB;;AAEA;AACA,wBAAIA,UAAU,KAAKnG,MAAnB,EAA2B;AACvBgG,4BAAI/F,KAAKpC,GAAL,CAASmI,CAAT,EAAY,CAACC,IAAb,CAAJ;AACH;;AAEDH,+BAAW,KAAKrE,SAAL,CAAeE,QAA1B,EAAoC,CAAC,GAAD,EAAM,KAAK1D,QAAL,GAAgB+H,CAAtB,CAApC;AACAF,+BAAW,KAAKrE,SAAL,CAAeE,QAA1B,EAAoC,CAAC,GAAD,EAAMwC,MAAM9F,CAAZ,CAApC,EAAoD,CAAC,GAAD,EAAM8F,MAAM7F,CAAZ,CAApD;AACH,iBAhBD,MAiBK;AACD,wBAAIyH,KAAJ,EAAW;AACPD,mCAAW,KAAKrE,SAAL,CAAeE,QAA1B,EAAoC,CAAC,GAAD,EAAM,KAAK1D,QAAX,CAApC;AACA8H,gCAAQ,KAAR;AACH;;AAEDD,+BAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAM,KAAK7D,KAAX,CAArC;AACA8H,+BAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAMsC,MAAM9F,CAAZ,CAArC,EAAqD,CAAC,GAAD,EAAM8F,MAAM7F,CAAZ,CAArD;AACH;;AAED,oBAAI6F,MAAMI,SAAN,IAAmBJ,MAAMM,WAA7B,EAA0C;AACtCsB,4BAAQ,IAAR;AACH;;AAED;AACA5B,wBAAQ,KAAKF,SAAL,CAAe,EAAEC,KAAjB,CAAR;AACH;;AAED;AACA4B,uBAAW,KAAKrE,SAAL,CAAeE,QAA1B,EAAoC,CAAC,GAAD,EAAM,KAAK1D,QAAX,CAApC;AACA6H,uBAAW,KAAKrE,SAAL,CAAeI,SAA1B,EAAqC,CAAC,GAAD,EAAM,KAAK7D,KAAX,CAArC;AACH,SA9CD;;AAgDA,aAAK,IAAIoE,IAAI,CAAb,EAAgBA,KAAK,KAAKpC,MAA1B,EAAkCoC,GAAlC,EAAuC;AACnC8D,iBAAK9D,CAAL;;AAEA,gBAAI,CAAE3B,MAAM4B,MAAZ,EAAoB;AAChB;AACH;;AAED,gBAAI,KAAK3B,MAAL,CAAY2B,MAAZ,GAAqBD,CAAzB,EAA4B;AACxB,qBAAK1B,MAAL,CAAYwB,IAAZ,CAAiB,EAAjB;AACH,aAFD,MAGK;AACD,qBAAKxB,MAAL,CAAY0B,IAAI,CAAhB,EAAmBF,IAAnB,CAAwBqB,KAAxB,CAA8B,KAAK7C,MAAL,CAAY0B,IAAI,CAAhB,CAA9B,EAAkD3B,KAAlD;AACH;;AAEDyD,oBAAQ,CAAR;AACAzD,oBAAQ,EAAR;AACA0D,oBAAQ,KAAKF,SAAL,CAAeC,KAAf,CAAR;;AAEA,iBAAKtD,YAAL,GAAoB,EAApB;AACH;;AAED;AACA,eAAO,IAAP;AACH;;AAED;AACAgF,sBAAkBT,QAAlB,EAA4B;AAAA;;AACxB;AACA,YAAI,KAAK5G,QAAL,IAAiB,CAAE,KAAKoG,gBAAL,EAAvB,EAAgD;AAC5C;AACA,mBAAO,IAAP;AACH;;AAED;AACA,YAAI,KAAKnG,SAAT,EAAoB;AAChB,iBAAKuG,kBAAL;AACH;;AAED;AACA,YAAI,KAAKnG,QAAT,EAAmB;AACf,iBAAKsG,oBAAL,CAA0BC,QAA1B;AACH;;AAED;AACA,aAAKxE,WAAL,CAAiB,CAAjB,EAAoB2D,KAApB,GAA4B,IAA5B;AACA,aAAK3D,WAAL,CAAiB,KAAKA,WAAL,CAAiB0B,MAAjB,GAA0B,CAA3C,EAA8CmC,IAA9C,GAAqD,IAArD;;AAEA;AACA,YAAIW,QAAJ,EAAc;AACV,iBAAKxE,WAAL,GAAmB,KAAKA,WAAL,CAAiBkF,OAAjB,EAAnB;AACH;;AAED;AACA,YAAI1B,KAAJ;AAAA,YAAWD,QAAQ,CAAnB;;AAEA;AACA,YAAIf,OAAJ;AAAA,YAAa1C,QAAQ,EAArB;;AAEA,YAAIqF,aAAa,YAAa;AAC1B3C,sBAAU,OAAKR,QAAL,CAAc,YAAd,CAAV;AACAQ,uBAAWL,MAAMC,SAAN,CAAgBb,IAAhB,CAAqBqB,KAArB,CAA2B9C,KAA3B,EAAkC0C,OAAlC,CAAX;AACH,SAHD;;AAKA;AACAgB,gBAAQ,KAAKF,SAAL,CAAeC,KAAf,CAAR;;AAEA;;AAEA4B,mBAAW,KAAKlE,EAAhB,EAAoB,CAAC,GAAD,EAAMuC,MAAM9F,CAAZ,CAApB,EAAoC,CAAC,GAAD,EAAM8F,MAAM7F,CAAZ,CAApC,EAAoD,CAAC,GAAD,EAAM,CAAN,CAApD;;AAEA;AACA6F,gBAAQ,KAAKF,SAAL,CAAe,EAAEC,KAAjB,CAAR;;AAEA;AACA,eAAOC,KAAP,EAAc;AACV;;AAEA;AACA2B,uBAAW3B,MAAMC,CAAjB,EAAoB,CAAC,GAAD,EAAMD,MAAM9F,CAAZ,CAApB,EAAoC,CAAC,GAAD,EAAM8F,MAAM7F,CAAZ,CAApC,EAAoD,CAAC,GAAD,EAAM6F,MAAMrF,CAAZ,CAApD;;AAEA;AACAqF,oBAAQ,KAAKF,SAAL,CAAe,EAAEC,KAAjB,CAAR;AACH;;AAED;AACA,YAAIzD,MAAM4B,MAAV,EAAkB;AACd,mBAAO5B,KAAP;AACH;;AAED;AACA,eAAO,IAAP;AACH;;AAED;AACAwB,sBAAkBjD,WAAlB,EAA+B;AAC3B;AACA,YAAI3B,IAAI,CAAR;AAAA,YAAWC,IAAI,CAAf;AACA,YAAI+G,CAAJ,EAAOO,CAAP,EAAUT,KAAV,EAAiB1D,KAAjB;AACA,YAAI2F,IAAI,KAAK9E,IAAL,CAAUR,KAAlB;AACA,YAAIuF,IAAI,KAAK/E,IAAL,CAAUP,MAAlB;;AAEA,YAAIoE,WAAe,KAAnB;AACA,YAAIZ,YAAe,KAAnB;AACA,YAAIG,eAAe,KAAnB;AACA,YAAID,cAAe,KAAnB;;AAEA,YAAI6B,qBAAqB,MAAM;AAC3B;AACA,iBAAK3F,WAAL,GAAmB,EAAnB;;AAEA;AACAwD,oBAAQ,IAAR;;AAEA;AACA,iBAAK9G,IAAI,CAAT,EAAYA,KAAK+I,CAAjB,EAAoB/I,GAApB,EAAyB;AACrB;AACAgH,oBAAIO,IAAI,KAAKjB,cAAL,CAAoBtG,CAApB,EAAuBC,CAAvB,EAA0BsH,CAA1B,CAAR;;AAEA;AACAL,4BAAeJ,SAASA,MAAMS,CAAN,IAAW,CAApB,IAAyBA,IAAK,CAA9B,IAAmC,CAACT,KAAnD;AACAO,+BAAeP,SAASA,MAAMI,SAA9B;AACAE,8BAAeN,SAASA,MAAMS,CAAN,GAAW,CAApB,IAAyBA,KAAK,CAA7C;;AAEA;AACA,oBAAI,CAAEO,QAAF,IAAchB,KAAlB,EAAyB;AACrBE,wBAAIF,MAAMS,CAAV;AACH;;AAED;AACAT,wBAAQ,EAAE9G,GAAGA,CAAL,EAAQC,GAAGA,CAAX,EAAc+G,GAAGA,CAAjB,EAAoBO,GAAGA;;AAE/B;AAFQ,iBAAR,CAGAL,cAAiBJ,MAAMI,SAAN,GAAqB,IAAtC;AACAG,iCAAiBP,MAAMO,YAAN,GAAqB,IAAtC;AACAD,gCAAiBN,MAAMM,WAAN,GAAqB,IAAtC;;AAEA;AACA,qBAAK9D,WAAL,CAAiBuB,IAAjB,CAAsBiC,KAAtB;AACH;AACJ,SAjCD;;AAmCA,YAAIoC,UAAc,CAAlB;AACA,YAAIC,cAAc,CAAlB;;AAEA,YAAIC,qBAAqB,MAAM;AAC3B;AACAhG,oBAAQ,KAAKiF,mBAAL,CAAyBP,QAAzB,CAAR;;AAEA;AACAoB,sBAAUtG,KAAKyG,KAAL,CAAYpJ,IAAI+I,CAAL,GAAU,GAArB,CAAV;;AAEA,gBAAIE,UAAUC,WAAd,EAA2B;AACvB,qBAAKG,WAAL,CAAiB,EAAElG,KAAF,EAAS8F,OAAT,EAAjB;AACH;;AAEDC,0BAAcD,OAAd;;AAEA;AACA,gBAAI,CAAE9F,KAAN,EAAa;AACT;AACH;;AAED;AACA0E,uBAAW,CAAEA,QAAb;;AAEA;AACA,iBAAK1E,KAAL,CAAWyB,IAAX,CAAgBqB,KAAhB,CAAsB,KAAK9C,KAA3B,EAAkCA,KAAlC;AACH,SAvBD;;AAyBA,YAAImG,kBAAkB,MAAM;AACxB;AACA,gBAAI,CAAE,KAAKpG,OAAX,EAAoB;AAChB,uBAAO,KAAKqG,QAAL,EAAP;AACH;;AAED;AACAP;AACAG;;AAEAnJ;;AAEA,gBAAIA,IAAI+I,CAAR,EAAW;AACP,oBAAIrH,WAAJ,EAAiB;AACb8H,+BAAWF,eAAX,EAA4B,CAA5B;AACH,iBAFD,MAGK;AACDA;AACH;AACJ,aAPD,MAQK;AACD,oBAAI,KAAK7I,OAAT,EAAkB;AACd,yBAAK2C,MAAL,CAAYqG,OAAZ,CAAoBtG,SAAS;AACzB,6BAAKA,KAAL,CAAWyB,IAAX,CAAgBqB,KAAhB,CAAsB,KAAK9C,KAA3B,EAAkCA,KAAlC;AACH,qBAFD;AAGH;;AAED,qBAAKuG,OAAL,CAAa,EAAEvG,OAAO,KAAKA,KAAd,EAAb;AACA,qBAAKD,OAAL,GAAe,KAAf;AACH;AACJ,SA9BD;;AAgCAoG;AACH;;AAED;AACA5E,oBAAgBhD,WAAhB,EAA6B;AACzB;AACA,YAAI3B,IAAI,CAAR;AAAA,YAAWC,IAAI,CAAf;AACA,YAAI+G,CAAJ,EAAOO,CAAP,EAAUT,KAAV,EAAiB1D,KAAjB;AACA,YAAI2F,IAAI,KAAK9E,IAAL,CAAUR,KAAlB;AACA,YAAIuF,IAAI,KAAK/E,IAAL,CAAUP,MAAlB;;AAEA,YAAIkG,aAAeb,IAAIC,CAAJ,GAAQ,CAA3B;AACA,YAAIa,UAAe,CAAnB;AACA,YAAI/B,WAAe,KAAnB;AACA,YAAIZ,YAAe,KAAnB;AACA,YAAIG,eAAe,KAAnB;AACA,YAAID,cAAe,KAAnB;;AAEA,YAAI6B,qBAAqB,CAACjJ,CAAD,EAAIC,CAAJ,KAAU;AAC/B;AACA,iBAAKqD,WAAL,GAAmB,EAAnB;;AAEA;AACAwD,oBAAQ,IAAR;;AAEA;AACA+C;;AAEA,mBAAM,IAAN,EAAY;AACR;AACA,oBAAI5J,IAAI,CAAC,CAAL,IAAUA,KAAK+I,CAAnB,EAAsB;AAClB;AACH;;AAED;AACA,oBAAIhJ,IAAI,CAAJ,IAASA,IAAI+I,CAAjB,EAAoB;AAChB;AACH;;AAED;AACA/B,oBAAIO,IAAI,KAAKjB,cAAL,CAAoBtG,CAApB,EAAuBC,CAAvB,EAA0BsH,CAA1B,CAAR;;AAEA;AACAL,4BAAeJ,SAASA,MAAMS,CAAN,IAAW,CAApB,IAAyBA,IAAK,CAA9B,IAAmC,CAACT,KAAnD;AACAO,+BAAeP,SAASA,MAAMI,SAA9B;AACAE,8BAAeN,SAASA,MAAMS,CAAN,GAAW,CAApB,IAAyBA,KAAK,CAA7C;;AAEA;AACA,oBAAI,CAAEO,QAAF,IAAchB,KAAlB,EAAyB;AACrBE,wBAAIF,MAAMS,CAAV;AACH;;AAED;AACAT,wBAAQ,EAAE9G,GAAGA,CAAL,EAAQC,GAAGA,CAAX,EAAc+G,GAAGA,CAAjB,EAAoBO,GAAGA;;AAE/B;AAFQ,iBAAR,CAGAL,cAAiBJ,MAAMI,SAAN,GAAqB,IAAtC;AACAG,iCAAiBP,MAAMO,YAAN,GAAqB,IAAtC;AACAD,gCAAiBN,MAAMM,WAAN,GAAqB,IAAtC;;AAEA;AACA,qBAAK9D,WAAL,CAAiBuB,IAAjB,CAAsBiC,KAAtB;;AAEA;AACA9G;AACAC;AACH;AACJ,SAjDD;;AAmDA,YAAIiJ,UAAc,CAAlB;AACA,YAAIC,cAAc,CAAlB;;AAEA,YAAIC,qBAAqB,MAAM;AAC3B;AACAhG,oBAAQ,KAAKiF,mBAAL,CAAyBP,QAAzB,CAAR;;AAEA;AACAoB,sBAAUtG,KAAKyG,KAAL,CAAYQ,UAAUD,UAAX,GAAyB,GAApC,CAAV;;AAEA,gBAAIV,UAAUC,WAAd,EAA2B;AACvB,qBAAKG,WAAL,CAAiB,EAAElG,KAAF,EAAS8F,OAAT,EAAjB;AACH;;AAEDC,0BAAcD,OAAd;;AAEA;AACA,gBAAI,CAAE9F,KAAN,EAAa;AACT;AACH;;AAED;AACA0E,uBAAW,CAAEA,QAAb;;AAEA;AACA,iBAAK1E,KAAL,CAAWyB,IAAX,CAAgBqB,KAAhB,CAAsB,KAAK9C,KAA3B,EAAkCA,KAAlC;AACH,SAvBD;;AAyBA,YAAImG,kBAAkB,MAAM;AACxB;AACA,gBAAI,CAAE,KAAKpG,OAAX,EAAoB;AAChB,uBAAO,KAAKqG,QAAL,EAAP;AACH;;AAED;AACAP,+BAAmBjJ,CAAnB,EAAsBC,CAAtB;AACAmJ;;AAEA,gBAAI,CAAEpJ,CAAN,EAASC,IAAT,KACKD;;AAEL,gBAAIC,MAAM+I,CAAV,EAAa;AACThJ;AACAC;AACH;;AAED,gBAAIA,IAAI+I,CAAJ,IAAShJ,IAAI+I,CAAjB,EAAoB;AAChB,oBAAIpH,WAAJ,EAAiB;AACb8H,+BAAWF,eAAX,EAA4B,CAA5B;AACH,iBAFD,MAGK;AACDA;AACH;AACJ,aAPD,MAQK;AACD,qBAAKI,OAAL,CAAa,EAAEvG,OAAO,KAAKA,KAAd,EAAb;AACA,qBAAKD,OAAL,GAAe,KAAf;AACH;AACJ,SA9BD;;AAgCAoG;AACH;;AAEDD,gBAAYQ,KAAZ,EAAmB;AACf;AACH;;AAEDH,YAAQG,KAAR,EAAe;AACX;AACH;;AAEDN,eAAW;AACP;AACH;;AAEDzF,OAAG+F,KAAH,EAAUC,QAAV,EAAoBC,OAApB,EAA6B;AACzB,YAAIC,SAAS,QAAQH,MAAM,CAAN,EAASI,WAAT,EAAR,GAAiCJ,MAAMnE,KAAN,CAAY,CAAZ,CAA9C;;AAEA,YAAI,CAAE,KAAKsE,MAAL,CAAF,IAAkB,OAAO,KAAKA,MAAL,CAAP,KAAwB,UAA9C,EAA0D;AACtD,kBAAM,IAAIvH,KAAJ,CAAU,sBAAsBoH,KAAhC,CAAN;AACH;;AAED,aAAKG,MAAL,IAAeH,SAASC,SAASnE,IAAT,CAAcoE,WAAW,IAAzB,EAA+BF,KAA/B,CAAxB;;AAEA,eAAO,IAAP;AACH;;AAED;AACAK,iBAAazK,QAAb,EAAuB;AACnB,YAAI,KAAKyD,OAAT,EAAkB;AACd;AACH;;AAED;AACA,aAAKA,OAAL,GAAgB,IAAhB;AACA,YAAIiH,YAAY,EAAhB;;AAEA,YAAIpK,IAAI,CAAR;AACA,YAAIC,IAAI,CAAR;AACA,YAAI8I,IAAI,KAAK9E,IAAL,CAAUR,KAAlB;AACA,YAAIuF,IAAI,KAAK/E,IAAL,CAAUP,MAAlB;;AAEA,YAAIwF,UAAc,CAAlB;AACA,YAAIC,cAAc,CAAlB;;AAEA;AACAzJ,mBAAWA,YAAY,EAAvB;;AAEA;AACA,aAAKmE,sBAAL,CAA4BnE,QAA5B;;AAEA;AACA,YAAIiC,cAAc,KAAKA,WAAvB;;AAEA,YAAIjC,SAASiC,WAAT,KAAyB8C,SAA7B,EAAwC;AACpC9C,0BAAcjC,SAASiC,WAAvB;AACH;;AAED,YAAIsH,qBAAqB,MAAM;AAC3B;AACA,gBAAIlB,SAAS,EAAb;;AAEA;AACA,iBAAK/H,IAAI,CAAT,EAAYA,IAAI+I,CAAhB,EAAmB/I,GAAnB,EAAwB;AACpB+H,uBAAOlD,IAAP,CAAY,KAAKM,cAAL,CAAoB,KAAKmB,cAAL,CAAoBtG,CAApB,EAAuBC,CAAvB,CAApB,CAAZ;AACH;;AAED;AACAiJ,sBAAUtG,KAAKyG,KAAL,CAAYpJ,IAAI+I,CAAL,GAAU,GAArB,CAAV;;AAEA,gBAAIE,UAAUC,WAAd,EAA2B;AACvB;AACA,qBAAKG,WAAL,CAAiB,EAAEvB,MAAF,EAAUmB,OAAV,EAAjB;AACH;;AAEDC,0BAAcD,OAAd;;AAEA;AACAkB,sBAAUvF,IAAV,CAAekD,MAAf;AACH,SArBD;;AAuBA,YAAIwB,kBAAkB,MAAM;AACxB;AACA,gBAAI,CAAE,KAAKpG,OAAX,EAAoB;AAChB,uBAAO,KAAKqG,QAAL,EAAP;AACH;;AAED;AACAP;;AAEAhJ;;AAEA,gBAAIA,IAAI+I,CAAR,EAAW;AACP,oBAAIrH,WAAJ,EAAiB;AACb8H,+BAAWF,eAAX,EAA4B,CAA5B;AACH,iBAFD,MAGK;AACDA;AACH;AACJ,aAPD,MAQK;AACD;AACA,qBAAKI,OAAL,CAAa,EAAES,SAAF,EAAb;AACA,qBAAKjH,OAAL,GAAe,KAAf;AACH;AACJ,SAxBD;;AA0BAoG;;AAEA,YAAI,CAAE5H,WAAN,EAAmB;AACf,mBAAOyI,SAAP;AACH;AACJ;AAj9BkC,C;;AAo9BvC;;QACSzK,a,GAAAA,a;iBACMA,a;;;;;;;;;kCAt9BTA,a;;;;;;;;;;;;ACJN;;;;;QAKgB0K,Y,GAAAA,Y;;AAHhB;;;;AACA;;;;;;AAEO,SAASA,YAAT,CAAsB3I,cAAtB,EAAsChC,QAAtC,EAAgD;AACrD,UAAOgC,cAAP;AACE,SAAK,QAAL;AACE,aAAO,IAAI4I,yBAAJ,CAAoB5K,QAApB,CAAP;AACF,SAAK,SAAL;AACA;AACE,aAAO,IAAI6K,0BAAJ,CAAqB7K,QAArB,CAAP;AALJ;AAOD;;;;;;;;gCARe2K,Y;;;;;;;;;;;;;;;;;ACJhB;;;;;;AAEA;IACME,gB,GAAN,MAAMA,gBAAN,SAA+B/K,2BAA/B,CAAgD;AAC9C;AACAC,cAAYC,QAAZ,EAAsB;AACpB,UAAMA,QAAN;AACD;;AAED8E,YAAUwB,MAAV,EAAkC;AAAA,QAAhBwE,SAAgB,uEAAN,KAAM;;AAChC,QAAGxE,UAAU,IAAb,EACE,OAAO,EAAP;;AAEF,QAAI5C,QAAQ,EAAZ;AACA,QAAG,CAACoH,SAAJ,EAAepH,SAAO,KAAP;AACfA,aAAS,KAAKqH,IAAL,CAAUzE,MAAV,CAAT;AACA,WAAO5C,KAAP;AACD;;AAEDkB,WAAS0B,MAAT,EAAiC;AAAA,QAAhBwE,SAAgB,uEAAN,KAAM;;AAC/B,QAAGxE,UAAU,IAAb,EACE,OAAO,EAAP;;AAEF,QAAI5C,QAAQ,EAAZ;AACA,QAAG,CAACoH,SAAJ,EAAepH,SAAO,KAAP;AACfA,aAAS,KAAKqH,IAAL,CAAUzE,MAAV,CAAT;AACA,WAAO5C,KAAP;AACD;;AAEDsH,SAAOtH,KAAP,EAAc4C,MAAd,EAAqB;AACnB,QAAG5C,SAAS,IAAZ,EACE,OAAO,EAAP;;AAEF,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,QAAQA,MAAMiD,KAAN,CAAY,YAAZ,EAA0BnB,IAA1B,CAA+Bc,OAAOjB,CAAtC,CAAR;AACF,WAAO3B,KAAP;AACD;;AAEDwH,UAAQxH,KAAR,EAAe4C,MAAf,EAAsB;AACpB,QAAG5C,SAAS,IAAZ,EACE,OAAO,EAAP;;AAEF,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,QAAQA,MAAMiD,KAAN,CAAY,YAAZ,EAA0BnB,IAA1B,CAA+Bc,OAAOjB,CAAtC,CAAR;AACF,WAAO3B,KAAP;AACD;;AAEDqH,OAAKzE,MAAL,EAAY;AACV,QAAI5C,QAAQ,EAAZ;AACA,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAOhG,CAAE,EAAvB;;AAEF,QAAGgG,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO/F,CAAE,EAAvB;;AAEF,QAAG+F,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO6E,CAAE,EAAvB;;AAEF,QAAG7E,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,IAAG4C,OAAOjB,CAAE,EAAtB;;AAEF,QAAGiB,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAOgB,CAAE,EAAvB;;AAEF,QAAGhB,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO8E,CAAE,EAAvB;;AAEF,WAAO1H,MAAM2H,IAAN,EAAP;AACD;;AAjE6C,C;;AAqEhD;;QACSR,gB,GAAAA,gB;iBACMA,gB;;;;;;;;;gCAvETA,gB;;;;;;;;;;;;;;;;;;;ACHN;;;;;;AAEA;IACMD,e,GAAN,MAAMA,eAAN,SAA8B9K,2BAA9B,CAA+C;AAC7C;AACAC,cAAYC,QAAZ,EAAsB;AACpB,UAAMA,QAAN;AACD;;AAED8E,YAAUwB,MAAV,EAAkC;AAAA,QAAhBwE,SAAgB,uEAAN,KAAM;;AAChC,QAAGxE,UAAU,IAAb,EACE,OAAO,EAAP;;AAEF,WAAO,KAAKyE,IAAL,CAAU,IAAV,EAAgBzE,MAAhB,CAAP;AACD;;AAED1B,WAAS0B,MAAT,EAAiC;AAAA,QAAhBwE,SAAgB,uEAAN,KAAM;;AAC/B,QAAGxE,UAAU,IAAb,EACE,OAAO,EAAP;;AAEF,WAAO,KAAKyE,IAAL,CAAU,IAAV,EAAgBzE,MAAhB,CAAP;AACD;;AAED0E,SAAOtH,KAAP,EAAc4C,MAAd,EAAqB;AACnB,QAAG5C,SAAS,IAAZ,EACE,OAAO,EAAP;;AAEF,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,QAAQA,MAAMiD,KAAN,CAAY,YAAZ,EAA0BnB,IAA1B,CAA+Bc,OAAOjB,CAAtC,CAAR;AACF,WAAO3B,KAAP;AACD;;AAEDwH,UAAQxH,KAAR,EAAe4C,MAAf,EAAsB;AACpB,QAAG5C,SAAS,IAAZ,EACE,OAAO,EAAP;;AAEF,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,QAAQA,MAAMiD,KAAN,CAAY,YAAZ,EAA0BnB,IAA1B,CAA+Bc,OAAOjB,CAAtC,CAAR;AACF,WAAO3B,KAAP;AACD;;AAEDqH,OAAKO,MAAL,EAAahF,MAAb,EAAoB;AAClB,QAAI5C,QAAQ,EAAZ;;AAEA,QAAG4C,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EAA8B;AAC5B,UAAG,KAAKjL,QAAL,CAAcuL,WAAd,CAA0BC,OAA1B,CAAkC,YAAlC,IAAkD,CAAC,CAAtD,EAAwD;AACtD9H,iBAAU,GAAE,KAAK1D,QAAL,CAAcuL,WAAd,CAA0B5E,KAA1B,CAAgC,YAAhC,EAA8CnB,IAA9C,CAAmD,KAAKxF,QAAL,CAAcyL,mBAAd,GAAkCnF,OAAOgB,CAA5F,CAA+F,MAA3G;AACD,OAFD,MAEK;AACH5D,iBAAU,GAAE,KAAK1D,QAAL,CAAcuL,WAAY,KAAIjF,OAAOgB,CAAE,MAAnD;AACD;AACF;;AAED,QAAGhB,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EAA8B;AAC5B,UAAG,KAAKjL,QAAL,CAAcuL,WAAd,CAA0BC,OAA1B,CAAkC,YAAlC,IAAkD,CAAC,CAAtD,EAAwD;AACtD9H,iBAAU,GAAE,KAAK1D,QAAL,CAAcuL,WAAd,CAA0B5E,KAA1B,CAAgC,YAAhC,EAA8CnB,IAA9C,CAAmDc,OAAOjB,CAA1D,CAA6D,MAAzE;AACD,OAFD,MAEK;AACH3B,iBAAU,GAAE,KAAK1D,QAAL,CAAcuL,WAAY,IAAGjF,OAAOjB,CAAE,MAAlD;AACD;AACF;;AAED3B,aAAS4H,MAAT;;AAEA,QAAGhF,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAOhG,CAAE,EAAvB;;AAEF,QAAGgG,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO/F,CAAE,EAAvB;;AAEF,QAAG+F,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO6E,CAAE,EAAvB;;AAEF,QAAG7E,OAAO2E,cAAP,CAAsB,GAAtB,CAAH,EACEvH,SAAU,KAAI4C,OAAO8E,CAAE,EAAvB;;AAEF,WAAO1H,MAAM2H,IAAN,EAAP;AACD;;AAxE4C,C;;AA4E/C;;QACST,e,GAAAA,e;iBACMA,e;;;;;;;;;gCA9ETA,e;;;;;;;;;;;;;;;;;;;ACJN;;;;;;AAEA;AACA,MAAMc,sBAAsB,CACxB,MADwB,EAExB,SAFwB,EAGxB,cAHwB,EAIxB,mBAJwB,EAIH,mBAJG,EAKxB,MALwB,EAKhB,UALgB,EAKJ,UALI,EAKQ,UALR,EAMxB,YANwB,EAMV,cANU,EAMM,aANN,CAA5B;;AASA;AACA,SAASC,KAAT,CAAeA,KAAf,EAAsB;AAClB,WAAOA,QAAQ,CAAR,GAAY,CAAZ,GAAiBA,QAAQ,GAAR,GAAc,GAAd,GAAoBA,KAA5C;AACH;;AAED;AACA,SAASlJ,WAAT,CAAqBmJ,IAArB,EAA2BvG,CAA3B,EAA8BK,KAA9B,EAAqC;AACjC,QAAIA,KAAJ,EAAW;AACPkG,aAAKvG,CAAL,IAAcsG,MAAM,MAAMC,KAAKvG,CAAL,CAAZ,CAAd;AACAuG,aAAKvG,IAAI,CAAT,IAAcsG,MAAM,MAAMC,KAAKvG,IAAI,CAAT,CAAZ,CAAd;AACAuG,aAAKvG,IAAI,CAAT,IAAcsG,MAAM,MAAMC,KAAKvG,IAAI,CAAT,CAAZ,CAAd;AACH;AACJ;;AAED,SAASjD,UAAT,CAAoBwJ,IAApB,EAA0BvG,CAA1B,EAA6BK,KAA7B,EAAoC;AAChC,QAAIA,UAAUX,SAAd,EAAyB;AACrB6G,aAAKvG,CAAL,IAAcsG,MAAMC,KAAKvG,CAAL,IAAcK,KAApB,CAAd;AACAkG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMC,KAAKvG,IAAI,CAAT,IAAcK,KAApB,CAAd;AACAkG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMC,KAAKvG,IAAI,CAAT,IAAcK,KAApB,CAAd;AACH;AACJ;;AAED,SAASrD,QAAT,CAAkBuJ,IAAlB,EAAwBvG,CAAxB,EAA2BK,KAA3B,EAAkC;AAC9B,QAAIA,UAAUX,SAAd,EAAyB;AACrB6G,aAAKvG,CAAL,IAAcsG,MAAMjG,SAASkG,KAAKvG,CAAL,IAAc,GAAvB,IAA8B,GAApC,CAAd;AACAuG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMjG,SAASkG,KAAKvG,IAAI,CAAT,IAAc,GAAvB,IAA8B,GAApC,CAAd;AACAuG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMjG,SAASkG,KAAKvG,IAAI,CAAT,IAAc,GAAvB,IAA8B,GAApC,CAAd;AACH;AACJ;;AAED,SAAS/C,KAAT,CAAesJ,IAAf,EAAqBvG,CAArB,EAAwBK,KAAxB,EAA+B;AAC3B,QAAIA,UAAUX,SAAd,EAAyB;AACrB6G,aAAKvG,CAAL,IAAcsG,MAAMzI,KAAK2I,GAAL,CAAS3I,KAAK4I,GAAL,CAAS,OAAOF,KAAKvG,CAAL,IAAc,GAArB,CAAT,IAAsCK,KAA/C,CAAN,CAAd;AACAkG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMzI,KAAK2I,GAAL,CAAS3I,KAAK4I,GAAL,CAAS,OAAOF,KAAKvG,IAAI,CAAT,IAAc,GAArB,CAAT,IAAsCK,KAA/C,CAAN,CAAd;AACAkG,aAAKvG,IAAI,CAAT,IAAcsG,MAAMzI,KAAK2I,GAAL,CAAS3I,KAAK4I,GAAL,CAAS,OAAOF,KAAKvG,IAAI,CAAT,IAAc,GAArB,CAAT,IAAsCK,KAA/C,CAAN,CAAd;AACH;AACJ;;AAED,SAASnD,SAAT,CAAmBqJ,IAAnB,EAAyBvG,CAAzB,EAA4B0G,SAA5B,EAAuCC,MAAvC,EAA+C;AAC3C;AACA;;AAEA;AACA,QAAIN,oBAAoBF,OAApB,CAA4BO,SAA5B,MAA2C,CAAC,CAAhD,EAAmD;AAC/C,cAAM,IAAI/I,KAAJ,CAAU,sCAAsC+I,SAAhD,CAAN;AACH;;AAED;AACA,QAAIA,cAAc,MAAlB,EAA0B;AACtB,eAAO,IAAP;AACH;;AAED;AACA,QAAI/E,IAAJ;AACA,QAAIiF,IAAIL,KAAKvG,CAAL,CAAR;AACA,QAAI6G,IAAIN,KAAKvG,IAAI,CAAT,CAAR;AACA,QAAI8G,IAAIP,KAAKvG,IAAI,CAAT,CAAR;;AAEA,YAAQ0G,SAAR;AACI,aAAK,SAAL;AACI/E,mBAAO,CAACiF,IAAIC,CAAJ,GAAQC,CAAT,IAAc,CAArB;AACA;;AAEJ,aAAK,MAAL;AAAa;AACTnF,mBAAQiF,IAAI,GAAL,GAAaC,IAAI,IAAjB,GAA0BC,IAAI,IAArC;AACA;;AAEJ,aAAK,UAAL;AAAiB;AACbnF,mBAAQiF,IAAI,KAAL,GAAeC,IAAI,KAAnB,GAA6BC,IAAI,KAAxC;AACA;;AAEJ,aAAK,UAAL;AAAiB;AACbnF,mBAAQiF,IAAI,MAAL,GAAgBC,IAAI,MAApB,GAA+BC,IAAI,MAA1C;AACA;;AAEJ,aAAK,UAAL;AAAiB;AACbnF,mBAAQiF,IAAI,KAAL,GAAeC,IAAI,KAAnB,GAA6BC,IAAI,KAAxC;AACA;;AAEJ,aAAK,cAAL;AACInF,mBAAO,CAAC9D,KAAKpC,GAAL,CAASmL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,IAAoBjJ,KAAKrC,GAAL,CAASoL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,CAArB,IAA0C,CAAjD;AACA;;AAEJ,aAAK,mBAAL;AACInF,mBAAO9D,KAAKrC,GAAL,CAASoL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,CAAP;AACA;;AAEJ,aAAK,mBAAL;AACInF,mBAAO9D,KAAKpC,GAAL,CAASmL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,CAAP;AACA;;AAEJ,aAAK,YAAL;AACInF,mBAAOiF,CAAP;AACA;;AAEJ,aAAK,cAAL;AACIjF,mBAAOkF,CAAP;AACA;;AAEJ,aAAK,aAAL;AACIlF,mBAAOmF,CAAP;AACA;AA3CR;;AA8CA;AACA,QAAIH,WAAWjH,SAAf,EAA0B;AACtBiC,eAAO9D,KAAKyG,KAAL,CAAW3C,OAAOgF,MAAlB,IAA4BA,MAAnC;AACH;;AAED;AACAhF,WAAOoF,SAASpF,IAAT,CAAP;;AAEA;AACA4E,SAAKvG,CAAL,IAAcsG,MAAM3E,IAAN,CAAd;AACA4E,SAAKvG,IAAI,CAAT,IAAcsG,MAAM3E,IAAN,CAAd;AACA4E,SAAKvG,IAAI,CAAT,IAAcsG,MAAM3E,IAAN,CAAd;AACH;;AAED;AACA,SAASqF,aAAT,CAAuBC,MAAvB,EAA+BtM,QAA/B,EAAyC;AACrCA,eAAWG,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACzB+B,mBAAc,KADW,EACH;AACtBC,oBAAc,CAFW,EAEH;AACtBC,kBAAc,CAHW,EAGH;AACtBC,eAAc,CAJW,EAIH;AACtBC,mBAAc,MALW,EAKH;AACtBC,sBAAc,GANW,EAMH;AACtBC,qBAAc,KAPW,EAOF;AACvB8J,mBAAc;AARW,KAAlB,EASRvM,YAAY,EATJ,CAAX;;AAWA;AACA,QAAIsK,UAAUgC,OAAOE,UAAP,CAAkB,IAAlB,CAAd;;AAEA;AACA,QAAIlC,QAAQmC,qBAAR,KAAkC1H,SAAtC,EAAiD;AAC7CuF,gBAAQmC,qBAAR,GAAgCzM,SAASmC,SAAzC;AACH,KAFD,MAGK;AACDmI,gBAAQoC,wBAAR,GAAsC1M,SAASmC,SAA/C;AACAmI,gBAAQqC,2BAAR,GAAsC3M,SAASmC,SAA/C;AACAmI,gBAAQsC,uBAAR,GAAsC5M,SAASmC,SAA/C;AACAmI,gBAAQuC,sBAAR,GAAsC7M,SAASmC,SAA/C;AACH;;AAED;AACA,QAAI2K,YAAYxC,QAAQyC,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BT,OAAOvI,KAAlC,EAAyCuI,OAAOtI,MAAhD,CAAhB;AACA,QAAI4H,OAAYkB,UAAUlB,IAA1B;;AAEA,QAAIoB,cAAJ,EAAoBC,gBAApB,EAAsCC,eAAtC,EAAuDC,kBAAvD;;AAEA,QAAInN,SAASqC,QAAT,KAAsB,CAA1B,EAA6B;AACzB2K,yBAAkB,OAAOhN,SAASqC,QAAT,GAAoB,GAA3B,CAAD,IAAqC,OAAO,MAAMrC,SAASqC,QAAtB,CAArC,CAAjB;AACH;;AAED,QAAIrC,SAASoC,UAAT,KAAwB,CAA5B,EAA+B;AAC3B6K,2BAAmBjN,SAASoC,UAA5B;AACH;;AAED,QAAIpC,SAASsC,KAAT,KAAmB,CAAvB,EAA0B;AACtB4K,0BAAkB,IAAIlN,SAASsC,KAA/B;AACH;;AAED;AACA,QAAItC,SAASwC,YAAT,GAAwB,CAAxB,IAA6BxC,SAASwC,YAAT,GAAwB,GAAzD,EAA8D;AAC1D2K,6BAAqB,OAAOnN,SAASwC,YAAT,GAAwB,CAA/B,CAArB;AACH;;AAED;AACA,SAAK,IAAI6C,IAAI,CAAR,EAAWkB,KAAKqF,KAAKtG,MAA1B,EAAkCD,IAAIkB,EAAtC,EAA0ClB,KAAK,CAA/C,EAAkD;AAC9C;AACA5C,oBAAYmJ,IAAZ,EAAkBvG,CAAlB,EAAqBrF,SAASyC,WAA9B;AACAL,mBAAWwJ,IAAX,EAAiBvG,CAAjB,EAAoB4H,gBAApB;AACA5K,iBAASuJ,IAAT,EAAevG,CAAf,EAAkB2H,cAAlB;AACA1K,cAAMsJ,IAAN,EAAYvG,CAAZ,EAAe6H,eAAf;AACA3K,kBAAUqJ,IAAV,EAAgBvG,CAAhB,EAAmBrF,SAASuC,SAA5B,EAAuC4K,kBAAvC;AACH;;AAED,QAAInN,SAASuM,SAAb,EAAwB;AACpBO,oBAAY,8BAAeA,SAAf,CAAZ;AACH;;AAED;AACAxC,YAAQ8C,YAAR,CAAqBN,SAArB,EAAgC,CAAhC,EAAmC,CAAnC;AACH;;AAED;QACST,a,GAAAA,a;iBACMA,a;;;;;;;;;kCArMTX,mB;;kCAUGC,K;;kCAKAlJ,W;;kCAQAL,U;;kCAQAC,Q;;kCAQAC,K;;kCAQAC,S;;kCAiFA8J,a;;;;;;;;;;;;;;;;;;;ACnIT;;;;;;AAEA;IACMnM,U,GAAN,MAAMA,UAAN,CAAiB;AACb;AACAH,gBAAYC,QAAZ,EAAsB;AAClB;AACA,aAAKqN,QAAL,GAAkB,IAAlB;AACA,aAAK7J,UAAL,GAAkB,EAAElD,GAAG,CAAL,EAAQC,GAAG,CAAX,EAAlB;AACA,aAAK2B,OAAL,GAAkB,EAAlB;;AAEA/B,eAAOC,MAAP,CAAc,IAAd,EAAoBJ,YAAY,EAAhC;;AAEA,YAAI,CAAE,KAAKwD,UAAL,CAAgBlD,CAAtB,EAAyB;AACrB,iBAAKkD,UAAL,GAAkB,EAAElD,GAAG,KAAKkD,UAAV,EAAsBjD,GAAG,KAAKiD,UAA9B,EAAlB;AACH;;AAED,aAAKe,IAAL,GAAc,EAAER,OAAO,CAAT,EAAYC,QAAQ,CAApB,EAAuBsJ,MAAM,CAA7B,EAAgCC,MAAM,CAAtC,EAAd;AACA,aAAKC,IAAL,GAAc,IAAd;AACA,aAAKC,KAAL,GAAc,IAAd;AACA,aAAKC,GAAL,GAAc,IAAd;AACA,aAAKpB,MAAL,GAAc,EAAd;AACA,aAAKjE,MAAL,GAAc,EAAd;AACH;;AAED;AACAsF,SAAKC,KAAL,EAAY;AACR;AACA,YAAIA,iBAAiBC,IAArB,EAA2B;AACvB,mBAAO,KAAKC,YAAL,CAAkBF,KAAlB,CAAP;AACH;;AAED;AACA,YAAIA,iBAAiBG,KAArB,EAA4B;AACxB,mBAAO,KAAKC,aAAL,CAAmBJ,KAAnB,CAAP;AACH;;AAED;AACA,YAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,iBAAiBK,GAAlD,EAAuD;AACnD,mBAAO,KAAKC,WAAL,CAAiBN,MAAMvC,IAAN,EAAjB,CAAP;AACH;;AAED;AACA,eAAO8C,QAAQC,MAAR,CAAe,IAAIpL,KAAJ,CAAU,2BAAV,CAAf,CAAP;AACH;;AAED;AACAqL,eAAWC,GAAX,EAAgBF,MAAhB,EAAwBG,OAAxB,EAAiC;AAC7B;AACA,YAAId,QAAQ,IAAIM,KAAJ,EAAZ;;AAEA;AACAN,cAAMe,MAAN,GAAepE,SAAS;AACpB,iBAAK4D,aAAL,CAAmBP,KAAnB,EAA0BgB,IAA1B,CAA+BF,OAA/B,EAAwCG,KAAxC,CAA8CN,MAA9C;AACH,SAFD;;AAIAX,cAAMkB,OAAN,GAAgBvE,SAAS;AACrBgE,mBAAO,IAAIpL,KAAJ,CAAU,iDAAiDsL,GAA3D,CAAP;AACH,SAFD;;AAIA;AACAb,cAAMa,GAAN,GAAYA,GAAZ;AACH;;AAED;AACAR,iBAAaF,KAAb,EAAoB;AAChB,eAAO,IAAIO,OAAJ,CAAY,CAACI,OAAD,EAAUH,MAAV,KAAqB;AACpC;AACA,gBAAI,EAAGR,iBAAiBC,IAApB,CAAJ,EAA+B;AAC3BO,uBAAO,IAAIpL,KAAJ,CAAU,oCAAV,CAAP;AACH;;AAED;AACA,iBAAKwK,IAAL,GAAYI,KAAZ;;AAEA;AACA,iBAAKS,UAAL,CAAgBJ,IAAIW,eAAJ,CAAoBhB,KAApB,CAAhB,EAA4CQ,MAA5C,EAAoDG,OAApD;AACH,SAXM,CAAP;AAYH;;AAED;AACAL,gBAAYN,KAAZ,EAAmB;AACf,eAAO,IAAIO,OAAJ,CAAY,CAACI,OAAD,EAAUH,MAAV,KAAqB;AACpC;AACA,gBAAI,EAAGR,iBAAiBK,GAApB,KAA4B,OAAOL,KAAP,KAAiB,QAAjD,EAA2D;AACvDQ,uBAAO,IAAIpL,KAAJ,CAAU,6CAAV,CAAP;AACH;;AAED;AACA,gBAAI0K,MAAME,iBAAiBK,GAAjB,GAAuBL,KAAvB,GAA+B,IAAIK,GAAJ,CAAQL,KAAR,CAAzC;;AAEA;AACA,iBAAKF,GAAL,GAAWA,GAAX;;AAEA;AACA,iBAAKW,UAAL,CAAgBX,GAAhB,EAAqBU,MAArB,EAA6BG,OAA7B;AACH,SAdM,CAAP;AAeH;;AAED;AACAP,kBAAcJ,KAAd,EAAqB;AACjB,eAAO,IAAIO,OAAJ,CAAY,CAACI,OAAD,EAAUH,MAAV,KAAqB;AACpC;AACA,gBAAI,EAAGR,iBAAiBG,KAApB,CAAJ,EAAgC;AAC5BK,uBAAO,IAAIpL,KAAJ,CAAU,qCAAV,CAAP;AACH;;AAED;AACA,iBAAKyK,KAAL,GAAaG,KAAb;;AAEA;AACA,iBAAKtJ,aAAL;;AAEA;AACAiK,oBAAQ,IAAR;AACH,SAdM,CAAP;AAeH;;AAEDjK,oBAAgB;AACZ;AACA,aAAKgI,MAAL,GAAc,EAAd;AACA,aAAKjE,MAAL,GAAc,EAAd;;AAEA;AACA,YAAItE,QAASb,KAAKyG,KAAL,CAAW,KAAK8D,KAAL,CAAW1J,KAAX,GAAmB,KAAKP,UAAL,CAAgBlD,CAA9C,CAAb;AACA,YAAI0D,SAASd,KAAKyG,KAAL,CAAW,KAAK8D,KAAL,CAAWzJ,MAAX,GAAoB,KAAKR,UAAL,CAAgBjD,CAA/C,CAAb;AACA,YAAI+M,OAASpK,KAAK2L,IAAL,CAAU9K,QAAQ,KAAKsJ,QAAvB,CAAb;AACA,YAAIE,OAASrK,KAAK2L,IAAL,CAAU7K,SAAS,KAAKqJ,QAAxB,CAAb;;AAEA,aAAK9I,IAAL,GAAY,EAAER,KAAF,EAASC,MAAT,EAAiBsJ,IAAjB,EAAuBC;;AAEnC;AAFY,SAAZ,CAGA,IAAIlH,OAAU,IAAd;AACA,YAAIiG,SAAU,IAAd;AACA,YAAIjE,SAAU,IAAd;AACA,YAAIiC,UAAU,IAAd;;AAEA,YAAIhK,IAAK,IAAT,CAnBY,CAmBE;AACd,YAAIC,IAAK,IAAT,CApBY,CAoBE;AACd,YAAIuO,KAAK,IAAT,CArBY,CAqBE;AACd,YAAIC,KAAK,IAAT,CAtBY,CAsBE;AACd,YAAIC,KAAK,IAAT,CAvBY,CAuBE;AACd,YAAIC,KAAK,IAAT,CAxBY,CAwBE;;AAEd;AACA,aAAK1O,IAAI,CAAT,EAAYA,IAAI,KAAKgE,IAAL,CAAUgJ,IAA1B,EAAgChN,GAAhC,EAAqC;AACjC;AACA8F,mBAAS,EAAT;AACAgC,qBAAS,EAAT;;AAEA;AACA,iBAAK/H,IAAI,CAAT,EAAYA,IAAI,KAAKiE,IAAL,CAAU+I,IAA1B,EAAgChN,GAAhC,EAAqC;AACjC;AACAgM,yBAAS4C,SAASC,aAAT,CAAuB,QAAvB,CAAT;;AAEA;AACA,oBAAI7O,MAAM,CAAN,IAAWA,IAAK,KAAKiE,IAAL,CAAU+I,IAAV,GAAiB,CAArC,EAAyC;AACrChB,2BAAOvI,KAAP,GAAe,KAAKQ,IAAL,CAAUR,KAAV,GAAkB,KAAKsJ,QAAvB,GACA,KAAK9I,IAAL,CAAUR,KADV,GACkB,KAAKsJ,QADtC;AAEH,iBAHD,MAIK;AACD;AACAf,2BAAOvI,KAAP,GAAe,KAAKQ,IAAL,CAAUR,KAAV,GAAkB,KAAKsJ,QAAtC;AACH;;AAED,oBAAI9M,MAAM,CAAN,IAAWA,IAAK,KAAKgE,IAAL,CAAUgJ,IAAV,GAAiB,CAArC,EAAyC;AACrCjB,2BAAOtI,MAAP,GAAgB,KAAKO,IAAL,CAAUP,MAAV,GAAmB,KAAKqJ,QAAxB,GACA,KAAK9I,IAAL,CAAUP,MADV,GACmB,KAAKqJ,QADxC;AAEH,iBAHD,MAIK;AACD;AACAf,2BAAOtI,MAAP,GAAgB,KAAKO,IAAL,CAAUP,MAAV,GAAmB,KAAKqJ,QAAxC;AACH;;AAED;AACA/C,0BAAUgC,OAAOE,UAAP,CAAkB,IAAlB,CAAV;;AAEA;AACAlC,wBAAQ8E,SAAR,GAAoB,OAApB;AACA9E,wBAAQ+E,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuB/C,OAAOvI,KAA9B,EAAqCuI,OAAOtI,MAA5C;;AAEA;AACAgL,qBAAK1C,OAAOvI,KAAP,GAAe,KAAKP,UAAL,CAAgBlD,CAApC;AACA2O,qBAAK3C,OAAOtI,MAAP,GAAgB,KAAKR,UAAL,CAAgBjD,CAArC;AACAuO,qBAAKxO,IAAI,KAAK+M,QAAT,GAAoB,KAAK7J,UAAL,CAAgBlD,CAAzC;AACAyO,qBAAKxO,IAAI,KAAK8M,QAAT,GAAoB,KAAK7J,UAAL,CAAgBjD,CAAzC;;AAEA+J,wBAAQgF,SAAR,CACI,KAAK7B,KADT,EACgBqB,EADhB,EACoBC,EADpB,EACwBC,EADxB,EAC4BC,EAD5B,EAEI,CAFJ,EAEO,CAFP,EAEU3C,OAAOvI,KAFjB,EAEwBuI,OAAOtI,MAF/B;;AAKA;AACA,6CAAcsI,MAAd,EAAsB,KAAKpK,OAA3B;;AAEA;AACAmE,qBAAKlB,IAAL,CAAUmH,MAAV;;AAEA;AACAjE,uBAAOlD,IAAP,CAAYmF,QAAQyC,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BT,OAAOvI,KAAlC,EAAyCuI,OAAOtI,MAAhD,EAAwD4H,IAApE;AACH;;AAED;AACA,iBAAKvD,MAAL,CAAYlD,IAAZ,CAAiBkD,MAAjB;AACA,iBAAKiE,MAAL,CAAYnH,IAAZ,CAAiBkB,IAAjB;AACH;AACJ;;AAEDU,aAASzG,CAAT,EAAYC,CAAZ,EAAe;AACX;AACAD,YAAI8L,SAAS9L,CAAT,CAAJ;AACAC,YAAI6L,SAAS7L,CAAT,CAAJ;;AAEA,YAAIgP,MAAMjP,CAAN,KAAYiP,MAAMhP,CAAN,CAAhB,EAA0B;AACtB,kBAAM,IAAIyC,KAAJ,CAAU,gCAAV,CAAN;AACH;;AAED;AACA,YAAI1C,IAAI,CAAJ,IAASA,KAAK,KAAKiE,IAAL,CAAUR,KAA5B,EAAmC;AAC/B,kBAAM,IAAIf,KAAJ,CAAU,uBAAuB1C,CAAvB,GAA2B,SAA3B,GAAuC,KAAKiE,IAAL,CAAUR,KAA3D,CAAN;AACH;;AAED,YAAIxD,IAAI,CAAJ,IAASA,KAAK,KAAKgE,IAAL,CAAUP,MAA5B,EAAoC;AAChC,kBAAM,IAAIhB,KAAJ,CAAU,uBAAuBzC,CAAvB,GAA2B,SAA3B,GAAuC,KAAKgE,IAAL,CAAUP,MAA3D,CAAN;AACH;;AAED;AACA,YAAIwL,MAAMpD,SAAS9L,IAAI,KAAK+M,QAAlB,CAAV;AACA,YAAIoC,MAAMrD,SAAS7L,IAAI,KAAK8M,QAAlB,CAAV;;AAEA;AACAmC,gBAAQlP,KAAK,KAAK+M,QAAL,GAAgBmC,GAA7B;AACAC,gBAAQlP,KAAK,KAAK8M,QAAL,GAAgBoC,GAA7B;;AAEA;AACA,YAAIpC,WAAY,KAAKA,QAArB;;AAEA,YAAI,KAAK9I,IAAL,CAAUR,KAAV,GAAkBsJ,QAAtB,EAAgC;AAC5BA,uBAAW,KAAK9I,IAAL,CAAUR,KAArB;AACH,SAFD,MAGK,IAAI,KAAKQ,IAAL,CAAUR,KAAV,GAAkBsJ,YAAYmC,MAAM,CAAlB,CAAtB,EAA4C;AAC7CnC,uBAAW,KAAK9I,IAAL,CAAUR,KAAV,GAAkBsJ,QAA7B;AACH;;AAED,YAAIhI,IAAa9E,KAAK8M,WAAW,CAAhB,CAAD,GAAwB/M,IAAI,CAA5C;AACA,YAAI+H,SAAY,KAAKA,MAAL,CAAYoH,GAAZ,EAAiBD,GAAjB,CAAhB;AACA,YAAIE,YAAYrH,OAAOpC,KAAP,CAAaZ,CAAb,EAAgBA,IAAI,CAApB,CAAhB;;AAEA,eAAO;AACHsG,mBAAQ,EAAEM,GAAGyD,UAAU,CAAV,CAAL,EAAmBxD,GAAGwD,UAAU,CAAV,CAAtB,EAAoCvD,GAAGuD,UAAU,CAAV,CAAvC,EAAqDvE,GAAGuE,UAAU,CAAV,CAAxD,EADL;AAEH1I,kBAAQ,CAAC0I,UAAU,CAAV,IAAeA,UAAU,CAAV,CAAf,GAA8BA,UAAU,CAAV,CAA/B,IAA+C,CAFpD;AAGHC,kBAAQ,EAAEH,GAAF,EAAOC,GAAP,EAHL;AAIHG,oBAAQ,EAAEtP,CAAF,EAAKC,CAAL;AAJL,SAAP;AAMH;AA3PY,C;;AA8PjB;;QACSL,U,GAAAA,U;iBACMA,U;;;;;;;;;kCAhQTA,U;;;;;;;;;;;;;;;;ACHN;;AAEA;AACA2P,KAAKC,SAAL,GAAiB,UAAU1F,KAAV,EAAiB;AAC9B,QAAIA,MAAMwB,IAAN,CAAWmE,GAAX,KAAmB,OAAvB,EAAgC;AAC5BC,cAAM5F,MAAMwB,IAAZ;AACH;AACJ,CAJD;;AAQA;AACA,SAASoE,KAAT,CAAepE,IAAf,EAAqB;;AAEjB;AACA,QAAIqE,gBAAgB,IAAIhQ,4BAAJ,CAAkB2L,KAAK5L,QAAvB,CAApB;AACIG,WAAOC,MAAP,CAAe6P,aAAf,EAA8BrE,KAAKsE,UAAnC;AACJ;AACID,kBAAc5L,EAAd,CAAiB,UAAjB,EAA6B,UAAU+F,KAAV,EAAiB;AAC1CyF,aAAKM,WAAL,YAAmB/F,OAAO,YAA1B,IAA2CA,KAA3C;AACH,KAFD,EAEG/F,EAFH,CAEM,MAFN,EAEc,UAAU+F,KAAV,EAAiB;AAC3ByF,aAAKM,WAAL,YAAmB/F,OAAO,QAA1B,IAAuCA,KAAvC;AACH,KAJD,EAIG/F,EAJH,CAIM,OAJN,EAIe,YAAY;AACvBwL,aAAKM,WAAL,CAAiB,EAAE/F,OAAO,SAAT,EAAjB;AACH,KAND;;AASJyF,SAAKM,WAAL,CAAiB,EAAE/F,OAAO,OAAT,EAAjB;AACA6F,kBAAcxL,GAAd;AAEH;;;;;;;;kCAlBQuL,K;;;;;;;;;ACZT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;AACA;;AAEA,4BAA4B,iCAAiC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C","file":"f9a317a48d0a3e1a1228.worker.js","sourcesContent":[" \tvar parentHotUpdateCallback = this[\"webpackHotUpdate\"];\n \tthis[\"webpackHotUpdate\"] = \r\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) { // eslint-disable-line no-unused-vars\r\n \t\thotAddUpdateChunk(chunkId, moreModules);\r\n \t\tif(parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\r\n \t} ;\r\n \t\r\n \tfunction hotDownloadUpdateChunk(chunkId) { // eslint-disable-line no-unused-vars\r\n \t\timportScripts(__webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\");\r\n \t}\r\n \t\r\n \tfunction hotDownloadManifest(callback) { // eslint-disable-line no-unused-vars\r\n \t\treturn new Promise(function(resolve, reject) {\r\n \t\t\tif(typeof XMLHttpRequest === \"undefined\")\r\n \t\t\t\treturn reject(new Error(\"No browser support\"));\r\n \t\t\ttry {\r\n \t\t\t\tvar request = new XMLHttpRequest();\r\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\r\n \t\t\t\trequest.open(\"GET\", requestPath, true);\r\n \t\t\t\trequest.timeout = 10000;\r\n \t\t\t\trequest.send(null);\r\n \t\t\t} catch(err) {\r\n \t\t\t\treturn reject(err);\r\n \t\t\t}\r\n \t\t\trequest.onreadystatechange = function() {\r\n \t\t\t\tif(request.readyState !== 4) return;\r\n \t\t\t\tif(request.status === 0) {\r\n \t\t\t\t\t// timeout\r\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" timed out.\"));\r\n \t\t\t\t} else if(request.status === 404) {\r\n \t\t\t\t\t// no update available\r\n \t\t\t\t\tresolve();\r\n \t\t\t\t} else if(request.status !== 200 && request.status !== 304) {\r\n \t\t\t\t\t// other failure\r\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\r\n \t\t\t\t} else {\r\n \t\t\t\t\t// success\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\r\n \t\t\t\t\t} catch(e) {\r\n \t\t\t\t\t\treject(e);\r\n \t\t\t\t\t\treturn;\r\n \t\t\t\t\t}\r\n \t\t\t\t\tresolve(update);\r\n \t\t\t\t}\r\n \t\t\t};\r\n \t\t});\r\n \t}\r\n \t\r\n \tfunction hotDisposeChunk(chunkId) { //eslint-disable-line no-unused-vars\r\n \t\tdelete installedChunks[chunkId];\r\n \t}\r\n\n \t\r\n \t\r\n \tvar hotApplyOnUpdate = true;\r\n \tvar hotCurrentHash = \"f9a317a48d0a3e1a1228\"; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentModuleData = {};\r\n \tvar hotCurrentChildModule; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentParents = []; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentParentsTemp = []; // eslint-disable-line no-unused-vars\r\n \t\r\n \tfunction hotCreateRequire(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar me = installedModules[moduleId];\r\n \t\tif(!me) return __webpack_require__;\r\n \t\tvar fn = function(request) {\r\n \t\t\tif(me.hot.active) {\r\n \t\t\t\tif(installedModules[request]) {\r\n \t\t\t\t\tif(installedModules[request].parents.indexOf(moduleId) < 0)\r\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\r\n \t\t\t\t} else {\r\n \t\t\t\t\thotCurrentParents = [moduleId];\r\n \t\t\t\t\thotCurrentChildModule = request;\r\n \t\t\t\t}\r\n \t\t\t\tif(me.children.indexOf(request) < 0)\r\n \t\t\t\t\tme.children.push(request);\r\n \t\t\t} else {\r\n \t\t\t\tconsole.warn(\"[HMR] unexpected require(\" + request + \") from disposed module \" + moduleId);\r\n \t\t\t\thotCurrentParents = [];\r\n \t\t\t}\r\n \t\t\treturn __webpack_require__(request);\r\n \t\t};\r\n \t\tvar ObjectFactory = function ObjectFactory(name) {\r\n \t\t\treturn {\r\n \t\t\t\tconfigurable: true,\r\n \t\t\t\tenumerable: true,\r\n \t\t\t\tget: function() {\r\n \t\t\t\t\treturn __webpack_require__[name];\r\n \t\t\t\t},\r\n \t\t\t\tset: function(value) {\r\n \t\t\t\t\t__webpack_require__[name] = value;\r\n \t\t\t\t}\r\n \t\t\t};\r\n \t\t};\r\n \t\tfor(var name in __webpack_require__) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(__webpack_require__, name) && name !== \"e\") {\r\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\r\n \t\t\t}\r\n \t\t}\r\n \t\tfn.e = function(chunkId) {\r\n \t\t\tif(hotStatus === \"ready\")\r\n \t\t\t\thotSetStatus(\"prepare\");\r\n \t\t\thotChunksLoading++;\r\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\r\n \t\t\t\tfinishChunkLoading();\r\n \t\t\t\tthrow err;\r\n \t\t\t});\r\n \t\r\n \t\t\tfunction finishChunkLoading() {\r\n \t\t\t\thotChunksLoading--;\r\n \t\t\t\tif(hotStatus === \"prepare\") {\r\n \t\t\t\t\tif(!hotWaitingFilesMap[chunkId]) {\r\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\t\t\thotUpdateDownloaded();\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t};\r\n \t\treturn fn;\r\n \t}\r\n \t\r\n \tfunction hotCreateModule(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar hot = {\r\n \t\t\t// private stuff\r\n \t\t\t_acceptedDependencies: {},\r\n \t\t\t_declinedDependencies: {},\r\n \t\t\t_selfAccepted: false,\r\n \t\t\t_selfDeclined: false,\r\n \t\t\t_disposeHandlers: [],\r\n \t\t\t_main: hotCurrentChildModule !== moduleId,\r\n \t\r\n \t\t\t// Module API\r\n \t\t\tactive: true,\r\n \t\t\taccept: function(dep, callback) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfAccepted = true;\r\n \t\t\t\telse if(typeof dep === \"function\")\r\n \t\t\t\t\thot._selfAccepted = dep;\r\n \t\t\t\telse if(typeof dep === \"object\")\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\r\n \t\t\t\telse\r\n \t\t\t\t\thot._acceptedDependencies[dep] = callback || function() {};\r\n \t\t\t},\r\n \t\t\tdecline: function(dep) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfDeclined = true;\r\n \t\t\t\telse if(typeof dep === \"object\")\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\r\n \t\t\t\telse\r\n \t\t\t\t\thot._declinedDependencies[dep] = true;\r\n \t\t\t},\r\n \t\t\tdispose: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\taddDisposeHandler: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\tremoveDisposeHandler: function(callback) {\r\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\r\n \t\t\t\tif(idx >= 0) hot._disposeHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t// Management API\r\n \t\t\tcheck: hotCheck,\r\n \t\t\tapply: hotApply,\r\n \t\t\tstatus: function(l) {\r\n \t\t\t\tif(!l) return hotStatus;\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\taddStatusHandler: function(l) {\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\tremoveStatusHandler: function(l) {\r\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\r\n \t\t\t\tif(idx >= 0) hotStatusHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t//inherit from previous dispose call\r\n \t\t\tdata: hotCurrentModuleData[moduleId]\r\n \t\t};\r\n \t\thotCurrentChildModule = undefined;\r\n \t\treturn hot;\r\n \t}\r\n \t\r\n \tvar hotStatusHandlers = [];\r\n \tvar hotStatus = \"idle\";\r\n \t\r\n \tfunction hotSetStatus(newStatus) {\r\n \t\thotStatus = newStatus;\r\n \t\tfor(var i = 0; i < hotStatusHandlers.length; i++)\r\n \t\t\thotStatusHandlers[i].call(null, newStatus);\r\n \t}\r\n \t\r\n \t// while downloading\r\n \tvar hotWaitingFiles = 0;\r\n \tvar hotChunksLoading = 0;\r\n \tvar hotWaitingFilesMap = {};\r\n \tvar hotRequestedFilesMap = {};\r\n \tvar hotAvailableFilesMap = {};\r\n \tvar hotDeferred;\r\n \t\r\n \t// The update info\r\n \tvar hotUpdate, hotUpdateNewHash;\r\n \t\r\n \tfunction toModuleId(id) {\r\n \t\tvar isNumber = (+id) + \"\" === id;\r\n \t\treturn isNumber ? +id : id;\r\n \t}\r\n \t\r\n \tfunction hotCheck(apply) {\r\n \t\tif(hotStatus !== \"idle\") throw new Error(\"check() is only allowed in idle status\");\r\n \t\thotApplyOnUpdate = apply;\r\n \t\thotSetStatus(\"check\");\r\n \t\treturn hotDownloadManifest().then(function(update) {\r\n \t\t\tif(!update) {\r\n \t\t\t\thotSetStatus(\"idle\");\r\n \t\t\t\treturn null;\r\n \t\t\t}\r\n \t\t\thotRequestedFilesMap = {};\r\n \t\t\thotWaitingFilesMap = {};\r\n \t\t\thotAvailableFilesMap = update.c;\r\n \t\t\thotUpdateNewHash = update.h;\r\n \t\r\n \t\t\thotSetStatus(\"prepare\");\r\n \t\t\tvar promise = new Promise(function(resolve, reject) {\r\n \t\t\t\thotDeferred = {\r\n \t\t\t\t\tresolve: resolve,\r\n \t\t\t\t\treject: reject\r\n \t\t\t\t};\r\n \t\t\t});\r\n \t\t\thotUpdate = {};\r\n \t\t\tvar chunkId = 0;\r\n \t\t\t{ // eslint-disable-line no-lone-blocks\r\n \t\t\t\t/*globals chunkId */\r\n \t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t}\r\n \t\t\tif(hotStatus === \"prepare\" && hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\thotUpdateDownloaded();\r\n \t\t\t}\r\n \t\t\treturn promise;\r\n \t\t});\r\n \t}\r\n \t\r\n \tfunction hotAddUpdateChunk(chunkId, moreModules) { // eslint-disable-line no-unused-vars\r\n \t\tif(!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\r\n \t\t\treturn;\r\n \t\thotRequestedFilesMap[chunkId] = false;\r\n \t\tfor(var moduleId in moreModules) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\r\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\tif(--hotWaitingFiles === 0 && hotChunksLoading === 0) {\r\n \t\t\thotUpdateDownloaded();\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotEnsureUpdateChunk(chunkId) {\r\n \t\tif(!hotAvailableFilesMap[chunkId]) {\r\n \t\t\thotWaitingFilesMap[chunkId] = true;\r\n \t\t} else {\r\n \t\t\thotRequestedFilesMap[chunkId] = true;\r\n \t\t\thotWaitingFiles++;\r\n \t\t\thotDownloadUpdateChunk(chunkId);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotUpdateDownloaded() {\r\n \t\thotSetStatus(\"ready\");\r\n \t\tvar deferred = hotDeferred;\r\n \t\thotDeferred = null;\r\n \t\tif(!deferred) return;\r\n \t\tif(hotApplyOnUpdate) {\r\n \t\t\thotApply(hotApplyOnUpdate).then(function(result) {\r\n \t\t\t\tdeferred.resolve(result);\r\n \t\t\t}, function(err) {\r\n \t\t\t\tdeferred.reject(err);\r\n \t\t\t});\r\n \t\t} else {\r\n \t\t\tvar outdatedModules = [];\r\n \t\t\tfor(var id in hotUpdate) {\r\n \t\t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t\tdeferred.resolve(outdatedModules);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotApply(options) {\r\n \t\tif(hotStatus !== \"ready\") throw new Error(\"apply() is only allowed in ready status\");\r\n \t\toptions = options || {};\r\n \t\r\n \t\tvar cb;\r\n \t\tvar i;\r\n \t\tvar j;\r\n \t\tvar module;\r\n \t\tvar moduleId;\r\n \t\r\n \t\tfunction getAffectedStuff(updateModuleId) {\r\n \t\t\tvar outdatedModules = [updateModuleId];\r\n \t\t\tvar outdatedDependencies = {};\r\n \t\r\n \t\t\tvar queue = outdatedModules.slice().map(function(id) {\r\n \t\t\t\treturn {\r\n \t\t\t\t\tchain: [id],\r\n \t\t\t\t\tid: id\r\n \t\t\t\t};\r\n \t\t\t});\r\n \t\t\twhile(queue.length > 0) {\r\n \t\t\t\tvar queueItem = queue.pop();\r\n \t\t\t\tvar moduleId = queueItem.id;\r\n \t\t\t\tvar chain = queueItem.chain;\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tif(!module || module.hot._selfAccepted)\r\n \t\t\t\t\tcontinue;\r\n \t\t\t\tif(module.hot._selfDeclined) {\r\n \t\t\t\t\treturn {\r\n \t\t\t\t\t\ttype: \"self-declined\",\r\n \t\t\t\t\t\tchain: chain,\r\n \t\t\t\t\t\tmoduleId: moduleId\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tif(module.hot._main) {\r\n \t\t\t\t\treturn {\r\n \t\t\t\t\t\ttype: \"unaccepted\",\r\n \t\t\t\t\t\tchain: chain,\r\n \t\t\t\t\t\tmoduleId: moduleId\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tfor(var i = 0; i < module.parents.length; i++) {\r\n \t\t\t\t\tvar parentId = module.parents[i];\r\n \t\t\t\t\tvar parent = installedModules[parentId];\r\n \t\t\t\t\tif(!parent) continue;\r\n \t\t\t\t\tif(parent.hot._declinedDependencies[moduleId]) {\r\n \t\t\t\t\t\treturn {\r\n \t\t\t\t\t\t\ttype: \"declined\",\r\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\r\n \t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\tparentId: parentId\r\n \t\t\t\t\t\t};\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(outdatedModules.indexOf(parentId) >= 0) continue;\r\n \t\t\t\t\tif(parent.hot._acceptedDependencies[moduleId]) {\r\n \t\t\t\t\t\tif(!outdatedDependencies[parentId])\r\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\r\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\r\n \t\t\t\t\t\tcontinue;\r\n \t\t\t\t\t}\r\n \t\t\t\t\tdelete outdatedDependencies[parentId];\r\n \t\t\t\t\toutdatedModules.push(parentId);\r\n \t\t\t\t\tqueue.push({\r\n \t\t\t\t\t\tchain: chain.concat([parentId]),\r\n \t\t\t\t\t\tid: parentId\r\n \t\t\t\t\t});\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\r\n \t\t\treturn {\r\n \t\t\t\ttype: \"accepted\",\r\n \t\t\t\tmoduleId: updateModuleId,\r\n \t\t\t\toutdatedModules: outdatedModules,\r\n \t\t\t\toutdatedDependencies: outdatedDependencies\r\n \t\t\t};\r\n \t\t}\r\n \t\r\n \t\tfunction addAllToSet(a, b) {\r\n \t\t\tfor(var i = 0; i < b.length; i++) {\r\n \t\t\t\tvar item = b[i];\r\n \t\t\t\tif(a.indexOf(item) < 0)\r\n \t\t\t\t\ta.push(item);\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// at begin all updates modules are outdated\r\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\r\n \t\tvar outdatedDependencies = {};\r\n \t\tvar outdatedModules = [];\r\n \t\tvar appliedUpdate = {};\r\n \t\r\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\r\n \t\t\tconsole.warn(\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\");\r\n \t\t};\r\n \t\r\n \t\tfor(var id in hotUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\tmoduleId = toModuleId(id);\r\n \t\t\t\tvar result;\r\n \t\t\t\tif(hotUpdate[id]) {\r\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\r\n \t\t\t\t} else {\r\n \t\t\t\t\tresult = {\r\n \t\t\t\t\t\ttype: \"disposed\",\r\n \t\t\t\t\t\tmoduleId: id\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tvar abortError = false;\r\n \t\t\t\tvar doApply = false;\r\n \t\t\t\tvar doDispose = false;\r\n \t\t\t\tvar chainInfo = \"\";\r\n \t\t\t\tif(result.chain) {\r\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\r\n \t\t\t\t}\r\n \t\t\t\tswitch(result.type) {\r\n \t\t\t\t\tcase \"self-declined\":\r\n \t\t\t\t\t\tif(options.onDeclined)\r\n \t\t\t\t\t\t\toptions.onDeclined(result);\r\n \t\t\t\t\t\tif(!options.ignoreDeclined)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because of self decline: \" + result.moduleId + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"declined\":\r\n \t\t\t\t\t\tif(options.onDeclined)\r\n \t\t\t\t\t\t\toptions.onDeclined(result);\r\n \t\t\t\t\t\tif(!options.ignoreDeclined)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because of declined dependency: \" + result.moduleId + \" in \" + result.parentId + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"unaccepted\":\r\n \t\t\t\t\t\tif(options.onUnaccepted)\r\n \t\t\t\t\t\t\toptions.onUnaccepted(result);\r\n \t\t\t\t\t\tif(!options.ignoreUnaccepted)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"accepted\":\r\n \t\t\t\t\t\tif(options.onAccepted)\r\n \t\t\t\t\t\t\toptions.onAccepted(result);\r\n \t\t\t\t\t\tdoApply = true;\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"disposed\":\r\n \t\t\t\t\t\tif(options.onDisposed)\r\n \t\t\t\t\t\t\toptions.onDisposed(result);\r\n \t\t\t\t\t\tdoDispose = true;\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tdefault:\r\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\r\n \t\t\t\t}\r\n \t\t\t\tif(abortError) {\r\n \t\t\t\t\thotSetStatus(\"abort\");\r\n \t\t\t\t\treturn Promise.reject(abortError);\r\n \t\t\t\t}\r\n \t\t\t\tif(doApply) {\r\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\r\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\r\n \t\t\t\t\tfor(moduleId in result.outdatedDependencies) {\r\n \t\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(result.outdatedDependencies, moduleId)) {\r\n \t\t\t\t\t\t\tif(!outdatedDependencies[moduleId])\r\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\r\n \t\t\t\t\t\t\taddAllToSet(outdatedDependencies[moduleId], result.outdatedDependencies[moduleId]);\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t\tif(doDispose) {\r\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\r\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Store self accepted outdated modules to require them later by the module system\r\n \t\tvar outdatedSelfAcceptedModules = [];\r\n \t\tfor(i = 0; i < outdatedModules.length; i++) {\r\n \t\t\tmoduleId = outdatedModules[i];\r\n \t\t\tif(installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)\r\n \t\t\t\toutdatedSelfAcceptedModules.push({\r\n \t\t\t\t\tmodule: moduleId,\r\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\r\n \t\t\t\t});\r\n \t\t}\r\n \t\r\n \t\t// Now in \"dispose\" phase\r\n \t\thotSetStatus(\"dispose\");\r\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\r\n \t\t\tif(hotAvailableFilesMap[chunkId] === false) {\r\n \t\t\t\thotDisposeChunk(chunkId);\r\n \t\t\t}\r\n \t\t});\r\n \t\r\n \t\tvar idx;\r\n \t\tvar queue = outdatedModules.slice();\r\n \t\twhile(queue.length > 0) {\r\n \t\t\tmoduleId = queue.pop();\r\n \t\t\tmodule = installedModules[moduleId];\r\n \t\t\tif(!module) continue;\r\n \t\r\n \t\t\tvar data = {};\r\n \t\r\n \t\t\t// Call dispose handlers\r\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\r\n \t\t\tfor(j = 0; j < disposeHandlers.length; j++) {\r\n \t\t\t\tcb = disposeHandlers[j];\r\n \t\t\t\tcb(data);\r\n \t\t\t}\r\n \t\t\thotCurrentModuleData[moduleId] = data;\r\n \t\r\n \t\t\t// disable module (this disables requires from this module)\r\n \t\t\tmodule.hot.active = false;\r\n \t\r\n \t\t\t// remove module from cache\r\n \t\t\tdelete installedModules[moduleId];\r\n \t\r\n \t\t\t// remove \"parents\" references from all children\r\n \t\t\tfor(j = 0; j < module.children.length; j++) {\r\n \t\t\t\tvar child = installedModules[module.children[j]];\r\n \t\t\t\tif(!child) continue;\r\n \t\t\t\tidx = child.parents.indexOf(moduleId);\r\n \t\t\t\tif(idx >= 0) {\r\n \t\t\t\t\tchild.parents.splice(idx, 1);\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// remove outdated dependency from module children\r\n \t\tvar dependency;\r\n \t\tvar moduleOutdatedDependencies;\r\n \t\tfor(moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tif(module) {\r\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\t\tfor(j = 0; j < moduleOutdatedDependencies.length; j++) {\r\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\r\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\r\n \t\t\t\t\t\tif(idx >= 0) module.children.splice(idx, 1);\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Not in \"apply\" phase\r\n \t\thotSetStatus(\"apply\");\r\n \t\r\n \t\thotCurrentHash = hotUpdateNewHash;\r\n \t\r\n \t\t// insert new code\r\n \t\tfor(moduleId in appliedUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\r\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// call accept handlers\r\n \t\tvar error = null;\r\n \t\tfor(moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\tvar callbacks = [];\r\n \t\t\t\tfor(i = 0; i < moduleOutdatedDependencies.length; i++) {\r\n \t\t\t\t\tdependency = moduleOutdatedDependencies[i];\r\n \t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\r\n \t\t\t\t\tif(callbacks.indexOf(cb) >= 0) continue;\r\n \t\t\t\t\tcallbacks.push(cb);\r\n \t\t\t\t}\r\n \t\t\t\tfor(i = 0; i < callbacks.length; i++) {\r\n \t\t\t\t\tcb = callbacks[i];\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\tcb(moduleOutdatedDependencies);\r\n \t\t\t\t\t} catch(err) {\r\n \t\t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\t\ttype: \"accept-errored\",\r\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\r\n \t\t\t\t\t\t\t\terror: err\r\n \t\t\t\t\t\t\t});\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Load self accepted modules\r\n \t\tfor(i = 0; i < outdatedSelfAcceptedModules.length; i++) {\r\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\r\n \t\t\tmoduleId = item.module;\r\n \t\t\thotCurrentParents = [moduleId];\r\n \t\t\ttry {\r\n \t\t\t\t__webpack_require__(moduleId);\r\n \t\t\t} catch(err) {\r\n \t\t\t\tif(typeof item.errorHandler === \"function\") {\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\titem.errorHandler(err);\r\n \t\t\t\t\t} catch(err2) {\r\n \t\t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\r\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\t\terror: err2,\r\n \t\t\t\t\t\t\t\torginalError: err\r\n \t\t\t\t\t\t\t});\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\t\terror = err2;\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t} else {\r\n \t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\r\n \t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\terror: err\r\n \t\t\t\t\t\t});\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// handle errors in accept handlers and self accepted module load\r\n \t\tif(error) {\r\n \t\t\thotSetStatus(\"fail\");\r\n \t\t\treturn Promise.reject(error);\r\n \t\t}\r\n \t\r\n \t\thotSetStatus(\"idle\");\r\n \t\treturn new Promise(function(resolve) {\r\n \t\t\tresolve(outdatedModules);\r\n \t\t});\r\n \t}\r\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(7)(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f9a317a48d0a3e1a1228","\n// AbstractDriver class\nclass AbstractGenerator {\n  // Class constructor...\n  constructor(settings) {\n    this.settings = settings;\n  }\n\n}\n\n// Exports\nexport { AbstractGenerator }\nexport default AbstractGenerator\n\n\n\n// WEBPACK FOOTER //\n// ./lib/action2gcode/generators/abstract-generator.js","import CanvasGrid from './canvas-grid'\nimport { getGenerator } from \"../action2gcode/gcode-generator\"\n\n// RasterToGcode class\nclass RasterToGcode extends CanvasGrid {\n    // Class constructor...\n    constructor(settings) {\n        // Defaults settings\n        settings = Object.assign({\n            ppi: { x: 254, y: 254 }, // Pixel Per Inch (25.4 ppi == 1 ppm)\n\n            toolDiameter: 0.1,      // Tool diameter in millimeters\n            rapidRate   : 1500,     // Rapid rate in mm/min (G0 F value) nullish value to disable\n            feedRate    : 500,      // Feed rate in mm/min (G1 F value)\n            rateUnit    : 'mm/min', // Rapid/Feed rate unit [mm/min, mm/sec]\n\n            beamRange: { min: 0, max: 1 },   // Beam power range (Firmware value)\n            beamPower: { min: 0, max: 100 }, // Beam power (S value) as percentage of beamRange\n\n            milling  : false, // EXPERIMENTAL\n            zSafe    : 5,     // Safe Z for fast move\n            zSurface : 0,     // Usinable surface (white pixels)\n            zDepth   : -10,   // Z depth (black pixels)\n            passDepth: 1,     // Pass depth in millimeters\n\n            offsets  : { X: 0, Y: 0 }, // Global coordinates offsets\n            trimLine : true,           // Trim trailing white pixels\n            joinPixel: true,           // Join consecutive pixels with same intensity\n            burnWhite: true,           // [true = G1 S0 | false = G0] on inner white pixels\n            verboseG : false,          // Output verbose GCode (print each commands)\n            diagonal : false,          // Go diagonally (increase the distance between points)\n            overscan : 0,              // Add some extra white space (in millimeters) before and after each line\n\n            precision: { X: 2, Y: 2, S: 4 }, // Number of decimals for each commands\n\n            gcodeGenerator: \"default\",\n\n            nonBlocking: true, // Use setTimeout to avoid blocking the UI\n\n            filters: {\n                smoothing   : 0,      // Smoothing the input image ?\n                brightness  : 0,      // Image brightness [-255 to +255]\n                contrast    : 0,      // Image contrast [-255 to +255]\n                gamma       : 0,      // Image gamma correction [0.01 to 7.99]\n                grayscale   : 'none', // Graysale algorithm [average, luma, luma-601, luma-709, luma-240, desaturation, decomposition-[min|max], [red|green|blue]-chanel]\n                shadesOfGray: 256,    // Number of shades of gray [2-256]\n                invertColor : false   // Invert color...\n            },\n\n            onProgress       : null, // On progress callbacks\n            onProgressContext: null, // On progress callback context\n\n            onDone       : null, // On done callback\n            onDoneContext: null, // On done callback context\n\n            onAbort       : null, // On abort callback\n            onAbortContext: null  // On abort callback context\n        }, settings || {})\n\n        // Init properties\n        super(settings)\n\n        // Milling settings\n        if (this.milling) {\n            if (this.zSafe < this.zSurface) {\n                throw new Error('\"zSafe\" must be greater to \"zSurface\"')\n            }\n\n            this.passes = Math.abs(Math.floor(this.zDepth / this.passDepth))\n        }\n\n        // Negative beam size ?\n        if (this.toolDiameter <= 0) {\n            throw new Error('\"toolDiameter\" must be positive')\n        }\n\n        // Uniforme ppi\n        if (! this.ppi.x) {\n            this.ppi = { x: this.ppi, y: this.ppi }\n        }\n\n        // Calculate PPM = Pixel Per Millimeters\n        this.ppm = {\n            x: parseFloat((2540 / (this.ppi.x * 100)).toFixed(10)),\n            y: parseFloat((2540 / (this.ppi.y * 100)).toFixed(10))\n        }\n\n        // Calculate scale ratio\n        this.scaleRatio = {\n            x: this.ppm.x / this.toolDiameter,\n            y: this.ppm.y / this.toolDiameter\n        }\n\n        // State...\n        this.running      = false\n        this.gcode        = null\n        this.gcodes       = null\n        this.currentLine  = null\n        this.lastCommands = null\n\n        // Output size in millimeters\n        this.outputSize = { width : 0, height: 0 }\n\n        // Calculate beam offset\n        this.beamOffset = this.toolDiameter * 1000 / 2000\n\n        // Calculate real beam range\n        this.realBeamRange = {\n            min: this.beamRange.max / 100 * this.beamPower.min,\n            max: this.beamRange.max / 100 * this.beamPower.max\n        }\n\n        // Adjuste feed rate to mm/min\n        if (this.rateUnit === 'mm/sec') {\n            this.feedRate  *= 60\n\n            if (this.rapidRate) {\n                this.rapidRate *= 60\n            }\n        }\n\n        // Register user callbacks\n        this._registerUserCallbacks(this)\n    }\n\n    // Register user callbacks\n    _registerUserCallbacks(callbacks) {\n        // Register user callbacks\n        callbacks.onProgress && this.on('progress', callbacks.onProgress, callbacks.onProgressContext)\n        callbacks.onAbort && this.on('abort', callbacks.onAbort, callbacks.onAbortContext)\n        callbacks.onDone && this.on('done', callbacks.onDone, callbacks.onDoneContext)\n    }\n\n    // Process image\n    _processImage() {\n        // Call parent method\n        super._processImage()\n\n        // Calculate output size\n        this.outputSize = {\n            width : this.size.width  * (this.toolDiameter * 1000) / 1000,\n            height: this.size.height * (this.toolDiameter * 1000) / 1000\n        }\n    }\n\n    // Abort job\n    abort() {\n        this.running = false\n    }\n\n    // Process image and return gcode string\n    run(settings) {\n        if (this.running) {\n            return\n        }\n\n        // Reset state\n        this.running      = true\n        this.gcode        = []\n        this.gcodes       = []\n        this.lastCommands = {}\n        this.currentLine  = null\n\n        // Defaults settings\n        settings = settings || {}\n\n        this.generator = getGenerator(this.gcodeGenerator, this);\n\n        // G0 command\n        this.G1 = this.generator.moveTool;\n        this.G0 = this.burnWhite ? this.generator.moveTool : this.generator.moveRapid;\n\n        // Register user callbacks\n        this._registerUserCallbacks(settings)\n\n        // Non blocking mode ?\n        let nonBlocking = this.nonBlocking\n\n        if (settings.nonBlocking !== undefined) {\n            nonBlocking = settings.nonBlocking\n        }\n\n        // Add gcode header\n        this._addHeader()\n\n        // Scan type ?\n        if (this.diagonal) {\n            this._scanDiagonally(nonBlocking)\n        }\n        else {\n            this._scanHorizontally(nonBlocking)\n        }\n\n        if (! nonBlocking) {\n            return this.gcode\n        }\n    }\n\n    _addHeader() {\n        // Base headers\n        this.gcode.push(\n            '; Generated by LaserWeb (lw.raster-to-gcode.js)',\n            '; Size       : ' + this.outputSize.width + ' x ' + this.outputSize.height + ' mm',\n            '; PPI        : x: ' + this.ppi.x + ' - y: ' + this.ppi.y,\n            '; PPM        : x: ' + this.ppm.x + ' - y: ' + this.ppm.y,\n            '; Tool diam. : ' + this.toolDiameter + ' mm',\n            '; Feed rate  : ' + this.feedRate + ' ' + this.rateUnit\n        )\n\n        if (this.rapidRate) {\n           this.gcode.push('; Rapid rate  : ' + this.rapidRate + ' ' + this.rateUnit)\n        }\n\n        if (this.milling) {\n            this.gcode.push(\n                '; Z safe     : ' + this.zSafe,\n                '; Z surface  : ' + this.zSurface,\n                '; Z depth    : ' + this.zDepth\n            )\n        }\n        else {\n            this.gcode.push(\n                '; Beam range : ' + this.beamRange.min + ' to ' + this.beamRange.max,\n                '; Beam power : ' + this.beamPower.min + ' to ' + this.beamPower.max + ' %'\n            )\n        }\n\n        // Print activated options\n        let options = ['smoothing', 'trimLine', 'joinPixel', 'burnWhite', 'verboseG', 'diagonal']\n\n        for (var i = options.length - 1; i >= 0; i--) {\n            if (! this[options[i]]) {\n                options.splice(i, 1)\n            }\n        }\n\n        if (options.length) {\n            this.gcode.push('; Options    : ' + options.join(', '))\n        }\n\n        // Set feed rates\n        this.gcode.push('')\n\n        if (this.rapidRate) {\n           this.gcode.push('G0 F' + this.rapidRate)\n        }\n\n        this.gcode.push('G1 F' + this.feedRate)\n        this.gcode.push('')\n    }\n\n    // Map S value to pixel power\n    _mapPixelPower(value) {\n        let range = this.milling ? { min: 0, max: this.zDepth } : this.realBeamRange\n        return value * (range.max - range.min) / 255 + range.min\n    }\n\n    // Compute and return a command, return null if not changed\n    _command(name, value) {\n        //console.log(\"_command\", value);\n        // If the value argument is an object\n        if (typeof value === 'object') {\n            // Computed commands line\n            let commands = Array.prototype.slice.call(arguments)\n            let command, line = [], params = {};\n\n            // for each command\n            for (var i = 1, il = commands.length; i < il; i++) {\n                command = this._command.apply(this, commands[i])\n                command && line.push(command)\n                command && (params[command[0].toLowerCase()] = command[1]);\n            }\n\n            // Return the line if not empty\n            let result = line.length ? name.call(this.generator, params, name == this.lastCommands[\"function\"]).split(\"\\r\\n\") : null;\n            this.lastCommands[\"function\"] = name;\n            return result;\n        }\n\n        // Format the value\n        //console.log(\"value\", value);\n        value = value.toFixed(this.precision[name] || 0)\n\n        // If the value was changed or if verbose mode on\n        if (this.verboseG || value !== this.lastCommands[name]) {\n            this.lastCommands[name] = value;\n            return [name, value];\n        }\n\n        // No change\n        return null\n    }\n\n    // Get a pixel power value from the canvas data grid\n    _getPixelPower(x, y, defaultValue) {\n        try {\n            // Reverse Y value since canvas as top/left origin\n            y = this.size.height - y - 1\n\n            // Get pixel info\n            let pixel = this.getPixel(x, y)\n\n            // Reversed gray value [ 0 = white | 255 = black ]\n            return 255 - pixel.gray\n        }\n        catch (error) {\n            if (arguments.length === 3) {\n                return defaultValue\n            }\n            throw error\n        }\n    }\n\n    // Get a point from the current line with real world coordinates\n    _getPoint(index) {\n        // Get the point object from the current line\n        let point = this.currentLine[index]\n\n        // No point\n        if (! point) {\n            return null\n        }\n\n        // Commands\n        point.G = point.s ? this.G1 : this.G0\n        point.X = (point.x * this.toolDiameter) + this.offsets.X\n        point.Y = (point.y * this.toolDiameter) + this.offsets.Y\n        point.S = this._mapPixelPower(point.s)\n\n        // Offsets\n        if (this.diagonal) {\n            // Vertical offset\n            point.Y += this.toolDiameter\n\n            // Horizontal offset\n            if (point.first || point.lastWhite) {\n                point.X += this.beamOffset\n                point.Y -= this.beamOffset\n            }\n            else if ((point.last || point.lastColored) && !point.firstColored) {\n                point.X -= this.beamOffset\n                point.Y += this.beamOffset\n            }\n        }\n        else {\n            // Vertical offset\n            point.Y += this.beamOffset\n\n            // Horizontal offset\n            if (point.first || point.lastWhite) {\n                point.X += this.beamOffset\n            }\n            else if ((point.last || point.lastColored) && !point.firstColored) {\n                point.X -= this.beamOffset\n            }\n        }\n\n        // Return the point\n        return point\n    }\n\n    // Remove all trailing white spaces from the current line\n    _trimCurrentLine() {\n        // Remove white spaces from the left\n        let point = this.currentLine[0]\n\n        while (point && ! point.p) {\n            this.currentLine.shift()\n            point = this.currentLine[0]\n        }\n\n        // Remove white spaces from the right\n        point = this.currentLine[this.currentLine.length - 2]\n\n        while (point && ! point.p) {\n            this.currentLine.pop()\n            point = this.currentLine[this.currentLine.length - 2]\n        }\n\n        // Return the new line length\n        return this.currentLine.length\n    }\n\n    // Join pixel with same power\n    _reduceCurrentLine() {\n        // Line too short to be reduced\n        if (this.currentLine.length < 3) {\n            return this.currentLine.length\n        }\n\n        // Extract all points exept the first one\n        let points = this.currentLine.splice(1)\n\n        // Get current power\n        let power = this.currentLine[0].p\n\n        // For each extracted point\n        for (var point, i = 0, il = points.length - 1; i < il; i++) {\n            // Current point\n            point = points[i]\n\n            // On power change\n            if (power !== point.p) {\n                this.currentLine.push(point)\n            }\n\n            // Update power\n            power = point.p\n        }\n\n        // Add last point\n        this.currentLine.push(points[i])\n    }\n\n    // Add extra white pixels at the ends\n    _overscanCurrentLine(reversed) {\n        // Number of pixels to add on each side\n        let pixels = this.overscan / this.ppm.x\n\n        // Get first/last point\n        let firstPoint = this.currentLine[0]\n        let lastPoint  = this.currentLine[this.currentLine.length - 1]\n\n        // Is last white/colored point ?\n        firstPoint.s && (firstPoint.lastWhite  = true)\n        lastPoint.s  && (lastPoint.lastColored = true)\n\n        // Reversed line ?\n        reversed ? (lastPoint.s = 0) : (firstPoint.s = 0)\n\n        // Create left/right points\n        let rightPoint = { x: lastPoint.x + pixels , y: lastPoint.y , s: 0, p: 0 }\n        let leftPoint  = { x: firstPoint.x - pixels, y: firstPoint.y, s: 0, p: 0 }\n\n        if (this.diagonal) {\n            leftPoint.y  += pixels\n            rightPoint.y -= pixels\n        }\n\n        // Add left/right points to current line\n        this.currentLine.unshift(leftPoint)\n        this.currentLine.push(rightPoint)\n    }\n\n    // Process current line and return an array of GCode text lines\n    _processCurrentLine(reversed) {\n        if (this.milling) {\n            return this._processMillingLine(reversed)\n        }\n\n        return this._processLaserLine(reversed)\n    }\n\n    // Process current line and return an array of GCode text lines\n    _processMillingLine(reversed) {\n        // Skip empty line\n        if (! this._trimCurrentLine()) {\n            return null\n        }\n\n        // Join pixel with same power\n        if (this.joinPixel) {\n            this._reduceCurrentLine()\n        }\n\n        // Mark first and last point on the current line\n        this.currentLine[0].first = true\n        this.currentLine[this.currentLine.length - 1].last = true\n\n        // Reversed line ?\n        if (reversed) {\n            this.currentLine = this.currentLine.reverse()\n        }\n\n        // Point index\n        let point, index = 0\n\n        // Init loop vars...\n        let command, gcode = []\n\n        let addCommand = (...args) => {\n            command = this._command(...args)\n            command && Array.prototype.push.apply(gcode, command)\n        }\n\n        // Get first point\n        point = this._getPoint(index)\n\n        let plung = false\n        let Z, zMax\n\n        let pass = (passNum) => {\n            // Move to start of the line\n            addCommand(this.generator.moveRapid, ['Z', this.zSafe])\n            addCommand(this.generator.moveRapid, ['X', point.X], ['Y', point.Y])\n            addCommand(this.generator.moveRapid, ['Z', this.zSurface])\n\n            // For each point on the line\n            while (point) {\n                if (point.S) {\n                    if (plung) {\n                        addCommand(this.generator.moveRapid, ['Z', this.zSurface])\n                        plung = false\n                    }\n\n                    Z    = point.S\n                    zMax = this.passDepth * passNum\n\n                    // Last pass\n                    if (passNum < this.passes) {\n                        Z = Math.max(Z, -zMax)\n                    }\n\n                    addCommand(this.generator.moveTool, ['Z', this.zSurface + Z])\n                    addCommand(this.generator.moveTool, ['X', point.X], ['Y', point.Y])\n                }\n                else {\n                    if (plung) {\n                        addCommand(this.generator.moveTool, ['Z', this.zSurface])\n                        plung = false\n                    }\n\n                    addCommand(this.generator.moveRapid, ['Z', this.zSafe])\n                    addCommand(this.generator.moveRapid, ['X', point.X], ['Y', point.Y])\n                }\n\n                if (point.lastWhite || point.lastColored) {\n                    plung = true\n                }\n\n                // Get next point\n                point = this._getPoint(++index)\n            }\n\n            // Move to Z safe\n            addCommand(this.generator.moveTool, ['Z', this.zSurface])\n            addCommand(this.generator.moveRapid, ['Z', this.zSafe])\n        }\n\n        for (var i = 1; i <= this.passes; i++) {\n            pass(i)\n\n            if (! gcode.length) {\n                break\n            }\n\n            if (this.gcodes.length < i) {\n                this.gcodes.push([])\n            }\n            else {\n                this.gcodes[i - 1].push.apply(this.gcodes[i - 1], gcode)\n            }\n\n            index = 0\n            gcode = []\n            point = this._getPoint(index)\n\n            this.lastCommands = {}\n        }\n\n        // Not sure what to return...\n        return null\n    }\n\n    // Process current line and return an array of GCode text lines\n    _processLaserLine(reversed) {\n        // Trim trailing white spaces ?\n        if (this.trimLine && ! this._trimCurrentLine()) {\n            // Skip empty line\n            return null\n        }\n\n        // Join pixel with same power\n        if (this.joinPixel) {\n            this._reduceCurrentLine()\n        }\n\n        // Overscan ?\n        if (this.overscan) {\n            this._overscanCurrentLine(reversed)\n        }\n\n        // Mark first and last point on the current line\n        this.currentLine[0].first = true\n        this.currentLine[this.currentLine.length - 1].last = true\n\n        // Reversed line ?\n        if (reversed) {\n            this.currentLine = this.currentLine.reverse()\n        }\n\n        // Point index\n        let point, index = 0\n\n        // Init loop vars...\n        let command, gcode = []\n\n        let addCommand = (...args) => {\n            command = this._command(...args)\n            command && Array.prototype.push.apply(gcode, command)\n        }\n\n        // Get first point\n        point = this._getPoint(index)\n\n        // Move to start of the line\n\n        addCommand(this.G0, ['X', point.X], ['Y', point.Y], ['S', 0])\n\n        // Get next point\n        point = this._getPoint(++index)\n\n        // For each point on the line\n        while (point) {\n            // Burn to next point\n\n            //gcode.push(point.G.call(this.generator, {x: point.X.toFixed(this.precision[\"X\"]), y: point.Y.toFixed(this.precision[\"Y\"]), s:point.S.toFixed(this.precision[\"S\"])}));\n            addCommand(point.G, ['X', point.X], ['Y', point.Y], ['S', point.S])\n\n            // Get next point\n            point = this._getPoint(++index)\n        }\n\n        // Return gcode commands array\n        if (gcode.length) {\n            return gcode\n        }\n\n        // Empty line\n        return null\n    }\n\n    // Parse horizontally\n    _scanHorizontally(nonBlocking) {\n        // Init loop vars\n        let x = 0, y = 0\n        let s, p, point, gcode\n        let w = this.size.width\n        let h = this.size.height\n\n        let reversed     = false\n        let lastWhite    = false\n        let firstColored = false\n        let lastColored  = false\n\n        let computeCurrentLine = () => {\n            // Reset current line\n            this.currentLine = []\n\n            // Reset point object\n            point = null\n\n            // For each pixel on the line\n            for (x = 0; x <= w; x++) {\n                // Get pixel power [ 0 = white | 255 = black ]\n                s = p = this._getPixelPower(x, y, p)\n\n                // Is this the last white/colored pixel?\n                lastWhite    = point && point.p == 0 && p >  0 || !point\n                firstColored = point && point.lastWhite\n                lastColored  = point && point.p >  0 && p == 0\n\n                // Pixel color from last one on normal line\n                if (! reversed && point) {\n                    s = point.p\n                }\n\n                // Create point object\n                point = { x: x, y: y, s: s, p: p }\n\n                // Set last white/colored pixel\n                lastWhite    && (point.lastWhite    = true)\n                firstColored && (point.firstColored = true)\n                lastColored  && (point.lastColored  = true)\n\n                // Add point to current line\n                this.currentLine.push(point)\n            }\n        }\n\n        let percent     = 0\n        let lastPercent = 0\n\n        let processCurrentLine = () => {\n            // Process pixels line\n            gcode = this._processCurrentLine(reversed)\n\n            // Call progress callback\n            percent = Math.round((y / h) * 100)\n\n            if (percent > lastPercent) {\n                this._onProgress({ gcode, percent })\n            }\n\n            lastPercent = percent\n\n            // Skip empty gcode line\n            if (! gcode) {\n                return\n            }\n\n            // Toggle line state\n            reversed = ! reversed\n\n            // Concat line\n            this.gcode.push.apply(this.gcode, gcode)\n        }\n\n        let processNextLine = () => {\n            // Aborted ?\n            if (! this.running) {\n                return this._onAbort()\n            }\n\n            // Process line...\n            computeCurrentLine()\n            processCurrentLine()\n\n            y++\n\n            if (y < h) {\n                if (nonBlocking) {\n                    setTimeout(processNextLine, 0)\n                }\n                else {\n                    processNextLine()\n                }\n            }\n            else {\n                if (this.milling) {\n                    this.gcodes.forEach(gcode => {\n                        this.gcode.push.apply(this.gcode, gcode)\n                    })\n                }\n\n                this._onDone({ gcode: this.gcode })\n                this.running = false\n            }\n        }\n\n        processNextLine()\n    }\n\n    // Parse diagonally\n    _scanDiagonally(nonBlocking) {\n        // Init loop vars\n        let x = 0, y = 0\n        let s, p, point, gcode\n        let w = this.size.width\n        let h = this.size.height\n\n        let totalLines   = w + h - 1\n        let lineNum      = 0\n        let reversed     = false\n        let lastWhite    = false\n        let firstColored = false\n        let lastColored  = false\n\n        let computeCurrentLine = (x, y) => {\n            // Reset current line\n            this.currentLine = []\n\n            // Reset point object\n            point = null\n\n            // Increment line num\n            lineNum++\n\n            while(true) {\n                // Y limit reached !\n                if (y < -1 || y == h) {\n                    break\n                }\n\n                // X limit reached !\n                if (x < 0 || x > w) {\n                    break\n                }\n\n                // Get pixel power [ 0 = white | 255 = black ]\n                s = p = this._getPixelPower(x, y, p)\n\n                // Is this the last white/colored pixel?\n                lastWhite    = point && point.p == 0 && p >  0 || !point\n                firstColored = point && point.lastWhite\n                lastColored  = point && point.p >  0 && p == 0\n\n                // Pixel color from last one on normal line\n                if (! reversed && point) {\n                    s = point.p\n                }\n\n                // Create point object\n                point = { x: x, y: y, s: s, p: p }\n\n                // Set last white/colored pixel\n                lastWhite    && (point.lastWhite    = true)\n                firstColored && (point.firstColored = true)\n                lastColored  && (point.lastColored  = true)\n\n                // Add point to current line\n                this.currentLine.push(point)\n\n                // Next coords\n                x++\n                y--\n            }\n        }\n\n        let percent     = 0\n        let lastPercent = 0\n\n        let processCurrentLine = () => {\n            // Process pixels line\n            gcode = this._processCurrentLine(reversed)\n\n            // Call progress callback\n            percent = Math.round((lineNum / totalLines) * 100)\n\n            if (percent > lastPercent) {\n                this._onProgress({ gcode, percent })\n            }\n\n            lastPercent = percent\n\n            // Skip empty gcode line\n            if (! gcode) {\n                return\n            }\n\n            // Toggle line state\n            reversed = ! reversed\n\n            // Concat line\n            this.gcode.push.apply(this.gcode, gcode)\n        }\n\n        let processNextLine = () => {\n            // Aborted ?\n            if (! this.running) {\n                return this._onAbort()\n            }\n\n            // Process line...\n            computeCurrentLine(x, y)\n            processCurrentLine()\n\n            if (! x) y++\n            else x++\n\n            if (y === h) {\n                x++\n                y--\n            }\n\n            if (y < h && x < w) {\n                if (nonBlocking) {\n                    setTimeout(processNextLine, 0)\n                }\n                else {\n                    processNextLine()\n                }\n            }\n            else {\n                this._onDone({ gcode: this.gcode })\n                this.running = false\n            }\n        }\n\n        processNextLine()\n    }\n\n    _onProgress(event) {\n        //console.log('progress:', event.percent)\n    }\n\n    _onDone(event) {\n        //console.log('done:', event.gcode.length)\n    }\n\n    _onAbort() {\n        //console.log('abort')\n    }\n\n    on(event, callback, context) {\n        let method = '_on' + event[0].toUpperCase() + event.slice(1)\n\n        if (! this[method] || typeof this[method] !== 'function') {\n            throw new Error('Undefined event: ' + event)\n        }\n\n        this[method] = event => callback.call(context || this, event)\n\n        return this\n    }\n\n    // Return the bitmap height-map\n    getHeightMap(settings) {\n        if (this.running) {\n            return\n        }\n\n        // Init loop vars\n        this.running  = true\n        let heightMap = []\n\n        let x = 0\n        let y = 0\n        let w = this.size.width\n        let h = this.size.height\n\n        let percent     = 0\n        let lastPercent = 0\n\n        // Defaults settings\n        settings = settings || {}\n\n        // Register user callbacks\n        this._registerUserCallbacks(settings)\n\n        // Non blocking mode ?\n        let nonBlocking = this.nonBlocking\n\n        if (settings.nonBlocking !== undefined) {\n            nonBlocking = settings.nonBlocking\n        }\n\n        let computeCurrentLine = () => {\n            // Reset current line\n            let pixels = []\n\n            // For each pixel on the line\n            for (x = 0; x < w; x++) {\n                pixels.push(this._mapPixelPower(this._getPixelPower(x, y)))\n            }\n\n            // Call progress callback\n            percent = Math.round((y / h) * 100)\n\n            if (percent > lastPercent) {\n                //onProgress.call(settings.progressContext || this, { pixels, percent })\n                this._onProgress({ pixels, percent })\n            }\n\n            lastPercent = percent\n\n            // Add pixels line\n            heightMap.push(pixels)\n        }\n\n        let processNextLine = () => {\n            // Aborted ?\n            if (! this.running) {\n                return this._onAbort()\n            }\n\n            // Process line...\n            computeCurrentLine()\n\n            y++\n\n            if (y < h) {\n                if (nonBlocking) {\n                    setTimeout(processNextLine, 0)\n                }\n                else {\n                    processNextLine()\n                }\n            }\n            else {\n                //onDone.call(settings.doneContext || this, { heightMap })\n                this._onDone({ heightMap })\n                this.running = false\n            }\n        }\n\n        processNextLine()\n\n        if (! nonBlocking) {\n            return heightMap\n        }\n    }\n}\n\n// Exports\nexport { RasterToGcode }\nexport default RasterToGcode\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lw.raster2gcode/raster-to-gcode.js","'use strict';\n\nimport DefaultGenerator from \"./generators/default-generator\"\nimport MarlinGenerator from \"./generators/marlin-generator\"\n\nexport function getGenerator(gcodeGenerator, settings) {\n  switch(gcodeGenerator){\n    case \"marlin\" :\n      return new MarlinGenerator(settings);\n    case \"default\" :\n    default :\n      return new DefaultGenerator(settings);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/action2gcode/gcode-generator.js","\nimport AbstractGenerator from \"./abstract-generator\"\n\n// AbstractDriver class\nclass DefaultGenerator extends AbstractGenerator{\n  // Class constructor...\n  constructor(settings) {\n    super(settings);\n  }\n\n  moveRapid(params, optimized=false){\n    if(params == null)\n      return \"\";\n\n    let gcode = \"\";\n    if(!optimized) gcode+=\"G0 \";\n    gcode += this.move(params);\n    return gcode;\n  }\n\n  moveTool(params, optimized=false){\n    if(params == null)\n      return \"\";\n\n    let gcode = \"\";\n    if(!optimized) gcode+=\"G1 \";\n    gcode += this.move(params);\n    return gcode;\n  }\n\n  toolOn(gcode, params){\n    if(gcode == null)\n      return \"\";\n\n    if(params.hasOwnProperty(\"i\"))\n      gcode = gcode.split(\"$INTENSITY\").join(params.i);\n    return gcode;\n  }\n\n  toolOff(gcode, params){\n    if(gcode == null)\n      return \"\";\n\n    if(params.hasOwnProperty(\"i\"))\n      gcode = gcode.split(\"$INTENSITY\").join(params.i);\n    return gcode;\n  }\n\n  move(params){\n    let gcode = \"\";\n    if(params.hasOwnProperty(\"x\"))\n      gcode += ` X${params.x}`;\n\n    if(params.hasOwnProperty(\"y\"))\n      gcode += ` Y${params.y}`;\n\n    if(params.hasOwnProperty(\"a\"))\n      gcode += ` A${params.a}`;\n\n    if(params.hasOwnProperty(\"i\"))\n      gcode += ` ${params.i}`;\n\n    if(params.hasOwnProperty(\"s\"))\n      gcode += ` S${params.s}`;\n\n    if(params.hasOwnProperty(\"f\"))\n      gcode += ` F${params.f}`;\n\n    return gcode.trim();\n  }\n\n}\n\n// Exports\nexport { DefaultGenerator }\nexport default DefaultGenerator\n\n\n\n// WEBPACK FOOTER //\n// ./lib/action2gcode/generators/default-generator.js","\nimport AbstractGenerator from \"./abstract-generator\"\n\n// AbstractDriver class\nclass MarlinGenerator extends AbstractGenerator{\n  // Class constructor...\n  constructor(settings) {\n    super(settings);\n  }\n\n  moveRapid(params, optimized=false){\n    if(params == null)\n      return \"\";\n\n    return this.move(\"G0\", params);\n  }\n\n  moveTool(params, optimized=false){\n    if(params == null)\n      return \"\";\n\n    return this.move(\"G1\", params);\n  }\n\n  toolOn(gcode, params){\n    if(gcode == null)\n      return \"\";\n\n    if(params.hasOwnProperty(\"i\"))\n      gcode = gcode.split(\"$INTENSITY\").join(params.i);\n    return gcode;\n  }\n\n  toolOff(gcode, params){\n    if(gcode == null)\n      return \"\";\n\n    if(params.hasOwnProperty(\"i\"))\n      gcode = gcode.split(\"$INTENSITY\").join(params.i);\n    return gcode;\n  }\n\n  move(prefix, params){\n    let gcode = \"\";\n\n    if(params.hasOwnProperty(\"s\")){\n      if(this.settings.gcodeToolOn.indexOf(\"$INTENSITY\") > -1){\n        gcode += `${this.settings.gcodeToolOn.split(\"$INTENSITY\").join(this.settings.gcodeLaserIntensity+params.s)}\\r\\n`;\n      }else{\n        gcode += `${this.settings.gcodeToolOn} S${params.s}\\r\\n`;\n      }\n    }\n\n    if(params.hasOwnProperty(\"i\")){\n      if(this.settings.gcodeToolOn.indexOf(\"$INTENSITY\") > -1){\n        gcode += `${this.settings.gcodeToolOn.split(\"$INTENSITY\").join(params.i)}\\r\\n`;\n      }else{\n        gcode += `${this.settings.gcodeToolOn} ${params.i}\\r\\n`;\n      }\n    }\n\n    gcode += prefix;\n\n    if(params.hasOwnProperty(\"x\"))\n      gcode += ` X${params.x}`;\n\n    if(params.hasOwnProperty(\"y\"))\n      gcode += ` Y${params.y}`;\n\n    if(params.hasOwnProperty(\"a\"))\n      gcode += ` A${params.a}`;\n\n    if(params.hasOwnProperty(\"f\"))\n      gcode += ` F${params.f}`;\n\n    return gcode.trim();\n  }\n\n}\n\n// Exports\nexport { MarlinGenerator }\nexport default MarlinGenerator\n\n\n\n// WEBPACK FOOTER //\n// ./lib/action2gcode/generators/marlin-generator.js","import FloydSteinberg from 'floyd-steinberg'\n\n// Grayscale algorithms\nconst grayscaleAlgorithms = [\n    'none',\n    'average',\n    'desaturation',\n    'decomposition-min', 'decomposition-max',\n    'luma', 'luma-601', 'luma-709', 'luma-240',\n    'red-chanel', 'green-chanel', 'blue-chanel'\n]\n\n// Trucate color value in the 0-255 range\nfunction color(color) {\n    return color < 0 ? 0 : (color > 255 ? 255 : color);\n}\n\n// Filters ...\nfunction invertColor(data, i, value) {\n    if (value) {\n        data[i]     = color(255 - data[i])\n        data[i + 1] = color(255 - data[i + 1])\n        data[i + 2] = color(255 - data[i + 2])\n    }\n}\n\nfunction brightness(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(data[i]     + value)\n        data[i + 1] = color(data[i + 1] + value)\n        data[i + 2] = color(data[i + 2] + value)\n    }\n}\n\nfunction contrast(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(value * (data[i]     - 128) + 128)\n        data[i + 1] = color(value * (data[i + 1] - 128) + 128)\n        data[i + 2] = color(value * (data[i + 2] - 128) + 128)\n    }\n}\n\nfunction gamma(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(Math.exp(Math.log(255 * (data[i]     / 255)) * value))\n        data[i + 1] = color(Math.exp(Math.log(255 * (data[i + 1] / 255)) * value))\n        data[i + 2] = color(Math.exp(Math.log(255 * (data[i + 2] / 255)) * value))\n    }\n}\n\nfunction grayscale(data, i, algorithm, shades) {\n    // Graysale\n    // http://www.tannerhelland.com/3643/grayscale-image-algorithm-vb6/\n\n    // Unsupported algorithm\n    if (grayscaleAlgorithms.indexOf(algorithm) === -1) {\n        throw new Error('Unsupported grayscale algorithm: ' + algorithm)\n    }\n\n    // None\n    if (algorithm === 'none') {\n        return null\n    }\n\n    // Get Red/Green/Blue values\n    let gray\n    let r = data[i];\n    let g = data[i + 1];\n    let b = data[i + 2];\n\n    switch (algorithm) {\n        case 'average':\n            gray = (r + g + b) / 3\n            break\n\n        case 'luma': // Default\n            gray = (r * 0.3) + (g * 0.59) + (b * 0.11)\n            break\n\n        case 'luma-601': // CCIR-601\n            gray = (r * 0.299) + (g * 0.587) + (b * 0.114)\n            break\n\n        case 'luma-709': // ITU-R-709\n            gray = (r * 0.2126) + (g * 0.7152) + (b * 0.0722)\n            break\n\n        case 'luma-240': // SMPTE-240M\n            gray = (r * 0.212) + (g * 0.701) + (b * 0.087)\n            break\n\n        case 'desaturation':\n            gray = (Math.max(r, g, b) + Math.min(r, g, b)) / 2\n            break\n\n        case 'decomposition-min':\n            gray = Math.min(r, g, b)\n            break\n\n        case 'decomposition-max':\n            gray = Math.max(r, g, b)\n            break\n\n        case 'red-chanel':\n            gray = r\n            break\n\n        case 'green-chanel':\n            gray = g\n            break\n\n        case 'blue-chanel':\n            gray = b\n            break\n    }\n\n    // Shades of gray\n    if (shades !== undefined) {\n        gray = Math.round(gray / shades) * shades\n    }\n\n    // Force integer\n    gray = parseInt(gray)\n\n    // Set new r/g/b values\n    data[i]     = color(gray)\n    data[i + 1] = color(gray)\n    data[i + 2] = color(gray)\n}\n\n// Apply filters on provided canvas\nfunction canvasFilters(canvas, settings) {\n    settings = Object.assign({}, {\n        smoothing   : false,  // Smoothing [true|fale]\n        brightness  : 0,      // Image brightness [-255 to +255]\n        contrast    : 0,      // Image contrast [-255 to +255]\n        gamma       : 0,      // Image gamma correction [0.01 to 7.99]\n        grayscale   : 'none', // Graysale algorithm [average, luma, luma-601, luma-709, luma-240, desaturation, decomposition-[min|max], [red|green|blue]-chanel]\n        shadesOfGray: 256,    // Number of shades of gray [2-256]\n        invertColor : false,   // Invert color...\n        dithering   : false\n    }, settings || {})\n\n    // Get canvas 2d context\n    let context = canvas.getContext('2d')\n\n    // Smoothing\n    if (context.imageSmoothingEnabled !== undefined) {\n        context.imageSmoothingEnabled = settings.smoothing\n    }\n    else {\n        context.mozImageSmoothingEnabled    = settings.smoothing\n        context.webkitImageSmoothingEnabled = settings.smoothing\n        context.msImageSmoothingEnabled     = settings.smoothing\n        context.oImageSmoothingEnabled      = settings.smoothing\n    }\n\n    // Get image data\n    let imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n    let data      = imageData.data\n\n    let contrastFactor, brightnessOffset, gammaCorrection, shadesOfGrayFactor\n\n    if (settings.contrast !== 0) {\n        contrastFactor = (259 * (settings.contrast + 255)) / (255 * (259 - settings.contrast))\n    }\n\n    if (settings.brightness !== 0) {\n        brightnessOffset = settings.brightness\n    }\n\n    if (settings.gamma !== 0) {\n        gammaCorrection = 1 / settings.gamma\n    }\n\n    // Shades of gray\n    if (settings.shadesOfGray > 1 && settings.shadesOfGray < 256) {\n        shadesOfGrayFactor = 255 / (settings.shadesOfGray - 1)\n    }\n\n    // For each pixel\n    for (let i = 0, il = data.length; i < il; i += 4) {\n        // Apply filters\n        invertColor(data, i, settings.invertColor)\n        brightness(data, i, brightnessOffset)\n        contrast(data, i, contrastFactor)\n        gamma(data, i, gammaCorrection)\n        grayscale(data, i, settings.grayscale, shadesOfGrayFactor)\n    }\n\n    if (settings.dithering) {\n        imageData = FloydSteinberg(imageData)\n    }\n\n    // Write new image data on the context\n    context.putImageData(imageData, 0, 0)\n}\n\n// Exports\nexport { canvasFilters }\nexport default canvasFilters\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lw.raster2gcode/canvas-filters.js","import canvasFilters from './canvas-filters'\n\n// CanvasGrid class\nclass CanvasGrid {\n    // Class constructor...\n    constructor(settings) {\n        // Init properties\n        this.cellSize   = 1024\n        this.scaleRatio = { x: 1, y: 1 }\n        this.filters    = {}\n\n        Object.assign(this, settings || {})\n\n        if (! this.scaleRatio.x) {\n            this.scaleRatio = { x: this.scaleRatio, y: this.scaleRatio }\n        }\n\n        this.size   = { width: 0, height: 0, cols: 0, rows: 0 }\n        this.file   = null\n        this.image  = null\n        this.url    = null\n        this.canvas = []\n        this.pixels = []\n    }\n\n    // <input> can be Image, File, URL object or URL string (http://* or data:image/*)\n    load(input) {\n        // Load File object\n        if (input instanceof File) {\n            return this.loadFromFile(input)\n        }\n\n        // Load Image object\n        if (input instanceof Image) {\n            return this.loadFromImage(input)\n        }\n\n        // Load URL object\n        if (typeof input === 'string' || input instanceof URL) {\n            return this.loadFromURL(input.trim())\n        }\n\n        // Return rejected promise with an Error object\n        return Promise.reject(new Error('Unsupported input format.'))\n    }\n\n    // Load image\n    _loadImage(src, reject, resolve) {\n        // Create Image object\n        let image = new Image()\n\n        // Register for load and error events\n        image.onload = event => {\n            this.loadFromImage(image).then(resolve).catch(reject)\n        }\n\n        image.onerror = event => {\n            reject(new Error('An error occurred while loading the image : ' + src))\n        }\n\n        // Load the image from File url\n        image.src = src\n    }\n\n    // Load from File object\n    loadFromFile(input) {\n        return new Promise((resolve, reject) => {\n            // Bad input type\n            if (! (input instanceof File)) {\n                reject(new Error('Input param must be a File object.'))\n            }\n\n            // Set input file\n            this.file = input\n\n            // Load image\n            this._loadImage(URL.createObjectURL(input), reject, resolve)\n        })\n    }\n\n    // Load from URL object or string\n    loadFromURL(input) {\n        return new Promise((resolve, reject) => {\n            // Bad input type\n            if (! (input instanceof URL) && typeof input !== 'string') {\n                reject(new Error('Input param must be a URL string or object.'))\n            }\n\n            // Create url object\n            let url = input instanceof URL ? input : new URL(input)\n\n            // Set url\n            this.url = url\n\n            // Load image\n            this._loadImage(url, reject, resolve)\n        })\n    }\n\n    // Load from Image object\n    loadFromImage(input) {\n        return new Promise((resolve, reject) => {\n            // Bad input type\n            if (! (input instanceof Image)) {\n                reject(new Error('Input param must be a Image object.'))\n            }\n\n            // Set input image\n            this.image = input\n\n            // Process image\n            this._processImage()\n\n            // Resolve the promise\n            resolve(this)\n        })\n    }\n\n    _processImage() {\n        // Reset canvas grid\n        this.canvas = []\n        this.pixels = []\n\n        // Calculate grid size\n        let width  = Math.round(this.image.width * this.scaleRatio.x)\n        let height = Math.round(this.image.height * this.scaleRatio.y)\n        let cols   = Math.ceil(width / this.cellSize)\n        let rows   = Math.ceil(height / this.cellSize)\n\n        this.size = { width, height, cols, rows }\n\n        // Create canvas grid\n        let line    = null\n        let canvas  = null\n        let pixels  = null\n        let context = null\n\n        let x  = null // cols\n        let y  = null // rows\n        let sx = null // scaled cols\n        let sy = null // scaled rows\n        let sw = null // scaled width\n        let sh = null // scaled height\n\n        // For each line\n        for (y = 0; y < this.size.rows; y++) {\n            // Reset current line\n            line   = []\n            pixels = []\n\n            // For each column\n            for (x = 0; x < this.size.cols; x++) {\n                // Create canvas element\n                canvas = document.createElement('canvas')\n\n                // Set canvas size\n                if (x === 0 || x < (this.size.cols - 1)) {\n                    canvas.width = this.size.width < this.cellSize\n                                 ? this.size.width : this.cellSize\n                }\n                else {\n                    // Get the rest for the last item (except the first one)\n                    canvas.width = this.size.width % this.cellSize\n                }\n\n                if (y === 0 || y < (this.size.rows - 1)) {\n                    canvas.height = this.size.height < this.cellSize\n                                  ? this.size.height : this.cellSize\n                }\n                else {\n                    // Get the rest for the last item (except the first one)\n                    canvas.height = this.size.height % this.cellSize\n                }\n\n                // Get canvas 2d context\n                context = canvas.getContext('2d')\n\n                // Fill withe background (avoid alpha chanel calculation)\n                context.fillStyle = 'white'\n                context.fillRect(0, 0, canvas.width, canvas.height)\n\n                // Draw the part of image in the canvas (scale)\n                sw = canvas.width / this.scaleRatio.x\n                sh = canvas.height / this.scaleRatio.y\n                sx = x * this.cellSize / this.scaleRatio.x\n                sy = y * this.cellSize / this.scaleRatio.y\n\n                context.drawImage(\n                    this.image, sx, sy, sw, sh,\n                    0, 0, canvas.width, canvas.height\n                )\n\n                // Apply image filters\n                canvasFilters(canvas, this.filters)\n\n                // Add the canvas to current line\n                line.push(canvas)\n\n                // Add the canvas image data to current line\n                pixels.push(context.getImageData(0, 0, canvas.width, canvas.height).data)\n            }\n\n            // Add the line to canvas grid\n            this.pixels.push(pixels)\n            this.canvas.push(line)\n        }\n    }\n\n    getPixel(x, y) {\n        // Test coords validity\n        x = parseInt(x)\n        y = parseInt(y)\n\n        if (isNaN(x) || isNaN(y)) {\n            throw new Error('[x, y] params must be Integer.')\n        }\n\n        // Test coords range\n        if (x < 0 || x >= this.size.width) {\n            throw new Error('Out of range: x = ' + x + ', max: ' + this.size.width)\n        }\n\n        if (y < 0 || y >= this.size.height) {\n            throw new Error('Out of range: y = ' + y + ', max: ' + this.size.height)\n        }\n\n        // Calculate target canvas coords\n        let col = parseInt(x / this.cellSize)\n        let row = parseInt(y / this.cellSize)\n\n        // Adjuste x/y values relative to canvas origin\n        col && (x -= this.cellSize * col)\n        row && (y -= this.cellSize * row)\n\n        // Get pixel data\n        let cellSize  = this.cellSize;\n\n        if (this.size.width < cellSize) {\n            cellSize = this.size.width\n        }\n        else if (this.size.width < cellSize * (col + 1)) {\n            cellSize = this.size.width % cellSize\n        }\n\n        let i         = (y * (cellSize * 4)) + (x * 4)\n        let pixels    = this.pixels[row][col]\n        let pixelData = pixels.slice(i, i + 4)\n\n        return {\n            color : { r: pixelData[0], g: pixelData[1], b: pixelData[2], a: pixelData[3] },\n            gray  : (pixelData[0] + pixelData[1] + pixelData[2]) / 3,\n            grid  : { col, row },\n            coords: { x, y }\n        }\n    }\n}\n\n// Exports\nexport { CanvasGrid }\nexport default CanvasGrid\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lw.raster2gcode/canvas-grid.js","import { RasterToGcode } from '../lw.raster2gcode/raster-to-gcode.js'\n\n// On messsage received\nself.onmessage = function (event) {\n    if (event.data.cmd === 'start') {\n        start(event.data);\n    }\n}\n\n\n\n// Start job\nfunction start(data) {\n\n    // Create RasterToGcode object\n    var rasterToGcode = new RasterToGcode(data.settings);\n        Object.assign( rasterToGcode, data.properties );\n    // Register events callbacks\n        rasterToGcode.on('progress', function (event) {\n            self.postMessage({ event: 'onProgress', ...event });\n        }).on('done', function (event) {\n            self.postMessage({ event: 'onDone', ...event });\n        }).on('abort', function () {\n            self.postMessage({ event: 'onAbort' });\n        });\n\n    \n    self.postMessage({ event: 'start' });\n    rasterToGcode.run();\n\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/workers/cam-raster.js","/*\n * floyd-steinberg\n *\n * Using 2D error diffusion formula published by Robert Floyd and Louis Steinberg in 1976\n *\n * Javascript implementation of Floyd-Steinberg algorithm thanks to Forrest Oliphant @forresto and @meemoo \n * via iFramework https://github.com/meemoo/iframework/blob/master/src/nodes/image-monochrome-worker.js\n *\n * Accepts an object that complies with the HTML5 canvas imageData spec https://developer.mozilla.org/en-US/docs/Web/API/ImageData\n * In particular, it makes use of the width, height, and data properties\n *\n * License: MIT\n*/\n\nmodule.exports = floyd_steinberg;\n\nfunction floyd_steinberg(image) {\n  var imageData = image.data;\n  var imageDataLength = imageData.length;\n  var w = image.width;\n  var lumR = [],\n      lumG = [],\n      lumB = [];\n\n  var newPixel, err;\n\n  for (var i = 0; i < 256; i++) {\n    lumR[i] = i * 0.299;\n    lumG[i] = i * 0.587;\n    lumB[i] = i * 0.110;\n  }\n\n  // Greyscale luminance (sets r pixels to luminance of rgb)\n  for (var i = 0; i <= imageDataLength; i += 4) {\n    imageData[i] = Math.floor(lumR[imageData[i]] + lumG[imageData[i+1]] + lumB[imageData[i+2]]);\n  }\n\n  for (var currentPixel = 0; currentPixel <= imageDataLength; currentPixel += 4) {\n    // threshold for determining current pixel's conversion to a black or white pixel\n    newPixel = imageData[currentPixel] < 150 ? 0 : 255;\n    err = Math.floor((imageData[currentPixel] - newPixel) / 23);\n    imageData[currentPixel] = newPixel;\n    imageData[currentPixel + 4         ] += err * 7;\n    imageData[currentPixel + 4 * w - 4 ] += err * 3;\n    imageData[currentPixel + 4 * w     ] += err * 5;\n    imageData[currentPixel + 4 * w + 4 ] += err * 1;\n    // Set g and b pixels equal to r (effectively greyscales the image fully)\n    imageData[currentPixel + 1] = imageData[currentPixel + 2] = imageData[currentPixel];\n  }\n\n  return image;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/floyd-steinberg/floyd-steinberg.js\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}